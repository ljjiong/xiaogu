{include file="header" /}
<link href="https://unpkg.com/element-ui/lib/theme-chalk/index.css" rel="stylesheet">
    <body>
        <section class="el-container is-vertical">
            {include file="top" /}
            <section class="el-container">
                {include file="left" /}
                <section class="el-container is-vertical">
                    <main class="el-main" id="main">
                        <div id="app">
                            <fieldset>
                                <legend>
                                    薪资列表
                                </legend>
                            </fieldset>
                            <!-- 筛选 -->
                            <el-row style="margin-bottom: 10px;">
                                <el-col>
                                    <el-card>
                                        <div slot="header">
                                            <span>
                                                查询
                                            </span>
                                        </div>
                                        <!-- 筛选条件 -->
                                        <el-row :gutter="20">
                                            <el-col :span="5">
                                                <span style="padding: 0px  10px;">请选择年份</span>
                                                <el-select placeholder="请选择年份" v-model="searchData.year">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options1">
                                                    </el-option>
                                                    <el-input v-model="selectData.asset_info.C">
                                                    </el-input>
                                                </el-select>
                                            </el-col>
                                            <el-col :span="5">
                                                <span style="padding: 0px  10px;">请选择月份</span>
                                                <el-select placeholder="请选择月份" v-model="searchData.month">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options">
                                                    </el-option>
                                                </el-select>
                                            </el-col>
                                            <el-col :span="5">
                                                <span style="padding: 0px  10px;">请选择出勤方式</span>
                                                <el-select placeholder="请选择出勤方式" v-model="searchData.type">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options2">
                                                    </el-option>
                                                </el-select>
                                            </el-col>
                                            <el-col :span="4">
                                                 <span style="padding: 0px  10px;"></span>
                                                <el-button @click="search();" icon="el-icon-search">
                                                </el-button>
                                                <el-button @click="refresh();" icon="el-icon-refresh">
                                                </el-button>
                                            </el-col>
                                        </el-row>
                                    </el-card>
                                </el-col>
                            </el-row>
                            <!-- 列表 -->
                            <el-row>
                                <el-col>
                                    <el-card>
                                        <div slot="header">
                                            <span>
                                                薪资列表
                                                <el-button @click="channel()" icon="el-icon-plus" size="mini" style="float: right;" type="primary" v-if="is_role != -1">
                                                    导入薪资
                                                </el-button>
                                            </span>
                                        </div>
                                        <div style="margin-bottom: 10px;">
                                            <el-button :disabled="multipleSelection.length == 0" @click="multiOperate('pull_black')" icon="el-icon-error" plain="" size="small" type="danger" v-if="is_role != -1">
                                                批量删除
                                            </el-button>
                                            <!--  <el-button @click="goAdd()" icon="el-icon-plus" size="mini" style="float: right;" type="primary">
                                                新增薪资表
                                            </el-button> -->
                                        </div>
                                        <!-- 表格 -->
                                        <template>
                                            <el-table :data="tableData" @selection-change="handleSelectionChange" stripe="" style="width: 100%">
                                                <el-table-column type="selection" width="55" v-if="is_role != -1">
                                                </el-table-column>
                                                <el-table-column fixed="" label="年份" prop="year">
                                                </el-table-column>
                                                <el-table-column fixed="" label="月份" prop="month">
                                                </el-table-column>
                                                <el-table-column fixed="" label="用户电话" prop="asset_info.AC" sortable="" width="150">
                                                </el-table-column>
                                                <el-table-column fixed="" label="用户昵称" prop="asset_info.B">
                                                </el-table-column>
                                               <!--  -->
                                                <el-table-column fixed="" label="应发工资" prop="salary">
                                                </el-table-column>
                                                <el-table-column fixed="" label="实发工资" prop="absenteeism">
                                                </el-table-column>
                                              
                                                <el-table-column fixed="right" label="操作" width="390">
                                                    <template slot-scope="scope">
                                                        <el-button @click="handleClick(scope.row, 'edit')" icon="el-icon-edit-outline" plain="" size="small" type="primary">
                                                        </el-button>
                                                    </template>
                                                </el-table-column>
                                            </el-table>
                                        </template>
                                        <!-- 分页 -->
                                        <template>
                                            <div class="block" style="margin-top: 20px;">
                                                <el-pagination :current-page="currentPage" :page-size="currentPageSize" :page-sizes="pageSize" :total="total" @current-change="handleCurrentChange" @size-change="handleSizeChange" layout="total, sizes, prev, pager, next, jumper">
                                                </el-pagination>
                                            </div>
                                        </template>
                                    </el-card>
                                </el-col>
                            </el-row>
                            <!-- dialog -->
                            <el-dialog :visible.sync="dialogVisible" title="编辑'在职'员工薪资">
                                <el-row :gutter="20">
                                    <el-col :offset="4" :span="16">
                                        <el-form :model="selectData" :rules="rules" label-position="left" label-width="100PX" ref="ruleForm">
                                            <el-form-item label="用户手机号" prop="asset_info.AC">
                                                <el-input disabled="" placeholder="请选择用户" style="width: 240px;" v-model="selectData.asset_info.AC">
                                                </el-input>
                                                <!-- <el-button @click="innerDialogVisible9 = true" plain="" type="primary">
                                                    选择用户
                                                </el-button> -->
                                            </el-form-item>
                                            <el-form-item label="员工姓名" prop="asset_info.B">
                                                <el-input disabled="" v-model="selectData.asset_info.B">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="基本工资" prop="asset_info.C">
                                                <el-input v-model="selectData.asset_info.C">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="辅助工资" prop="asset_info.D">
                                                <el-input v-model="selectData.asset_info.D">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="岗位津贴" prop="asset_info.E">
                                                <el-input v-model="selectData.asset_info.E">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="民族补贴" prop="asset_info.F">
                                                <el-input v-model="selectData.asset_info.F">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="安全奖" prop="asset_info.G">
                                                <el-input v-model="selectData.asset_info.G">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="生产工资" prop="asset_info.H">
                                                <el-input v-model="selectData.asset_info.H">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="奖金" prop="asset_info.I">
                                                <el-input v-model="selectData.asset_info.I">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="其他" prop="asset_info.J">
                                                <el-input v-model="selectData.asset_info.J">
                                                </el-input>
                                            </el-form-item> 
                                            <el-form-item label="卫生费" prop="asset_info.K">
                                                <el-input v-model="selectData.asset_info.K">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="生日慰问金" prop="asset_info.L">
                                                <el-input v-model="selectData.asset_info.L">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="值班补助" prop="asset_info.M">
                                                <el-input v-model="selectData.asset_info.M">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="打卡费" prop="asset_info.N">
                                                <el-input v-model="selectData.asset_info.N">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="发电之星" prop="asset_info.O">
                                                <el-input v-model="selectData.asset_info.O">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="加班费" prop="asset_info.P">
                                                <el-input v-model="selectData.asset_info.P">
                                                </el-input>
                                            </el-form-item> 
                                            <el-form-item label="加班加点包干工资" prop="asset_info.Q">
                                                <el-input v-model="selectData.asset_info.Q">
                                                </el-input>
                                            </el-form-item> 
                                            <el-form-item disabled="true" label="应发工资" prop="salary">
                                                <el-input disabled="" v-model="selectData.salary">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-itme>
                                                ==========个人应缴部分==========
                                            </el-form-itme>
                                            <el-form-item label="养老金" prop="asset_info.S">
                                                <el-input v-model="selectData.asset_info.S">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="企业年金(7-8)" prop="asset_info.T">
                                                <el-input v-model="selectData.asset_info.T">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="医疗保险保" prop="asset_info.U">
                                                <el-input v-model="selectData.asset_info.U">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="住房公积金" prop="accumulation">
                                                <el-input v-model="selectData.accumulation">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="工会费" prop="trade">
                                                <el-input v-model="selectData.trade">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="劳务费" prop="asset_info.X">
                                                <el-input v-model="selectData.asset_info.X">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item disabled="" label="个人应缴费用小计" prop="subtotal">
                                                <el-input disabled="" v-model="selectData.subtotal">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item :disabled="true" label="实发工资" prop="absenteeism">
                                                <el-input disabled="" v-model="selectData.absenteeism">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="年份" prop="year">
                                                <el-select placeholder="请选择" v-model="selectData.year">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options1">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                            <el-form-item label="月份" prop="month">
                                                <el-select placeholder="请选择" v-model="selectData.month">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                           
                                           <!--  <el-form-item>
                                                <el-button @click="dialogVisible = false;" plain="">
                                                    取消
                                                </el-button>
                                                <el-button @click="submit" type="primary">
                                                    提交
                                                </el-button>
                                            </el-form-item> -->
                                        </el-form>
                                    </el-col>
                                </el-row>
                                
                            </el-dialog>
                            <!-- dialog -->
                            <el-dialog :visible.sync="dialogVisible2" title="编辑'外出'员工薪资">
                                <el-row :gutter="20">
                                    <el-col :offset="4" :span="16">
                                        <el-form :model="selectData" :rules="rules" label-position="left" label-width="140PX" ref="ruleForm">
                                            <el-form-item label="用户手机号" prop="asset_info.X">
                                                <el-input disabled="" placeholder="请选择用户" style="width: 240px;" v-model="selectData.asset_info.X">
                                                </el-input>
                                               <!--  <el-button @click="innerDialogVisible9 = true" plain="" type="primary">
                                                    选择用户
                                                </el-button> -->
                                            </el-form-item>
                                            <el-form-item label="员工姓名" prop="asset_info.B">
                                                <el-input disabled="" v-model="selectData.asset_info.B">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="基本工资" prop="asset_info.C">
                                                <el-input v-model="selectData.asset_info.C">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="民族补贴" prop="asset_info.D">
                                                <el-input v-model="selectData.asset_info.D">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="辅助工资" prop="asset_info.E">
                                                <el-input v-model="selectData.asset_info.E">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="安全奖系数" prop="asset_info.F">
                                                <el-input v-model="selectData.asset_info.F">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="安全奖基数" prop="asset_info.G">
                                                <el-input v-model="selectData.asset_info.G">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="安全奖" prop="safety">
                                                <el-input v-model="selectData.safety">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="绩效工资" prop="asset_info.I">
                                                <el-input v-model="selectData.asset_info.I">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="生产奖" prop="production">
                                                <el-input v-model="selectData.production">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="卫生费" prop="asset_info.L">
                                                <el-input v-model="selectData.asset_info.L">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="临时新增工资" prop="asset_info.M">
                                                <el-input v-model="selectData.asset_info.M">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="应发工资" prop="salary">
                                                <el-input disabled="" v-model="selectData.salary">
                                                </el-input>
                                            </el-form-item>
                                            ==========个人应缴部分==========
                                            <el-form-item label="养老金" prop="asset_info.O">
                                                <el-input v-model="selectData.asset_info.O">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="医疗保险" prop="asset_info.Q">
                                                <el-input v-model="selectData.asset_info.Q">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="住房公积金" prop="accumulation">
                                                <el-input v-model="selectData.accumulation">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="工会费" prop="asset_info.S">
                                                <el-input v-model="selectData.asset_info.S">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="劳务费" prop="asset_info.T">
                                                <el-input v-model="selectData.asset_info.T">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="个人应缴费用小计" prop="subtotal">
                                                <el-input disabled="" v-model="selectData.subtotal">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="实发工资" prop="absenteeism">
                                                <el-input disabled="" v-model="selectData.absenteeism">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="年份" prop="year">
                                                <el-select placeholder="请选择" v-model="selectData.year">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options1">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                            <el-form-item label="月份" prop="month">
                                                <el-select placeholder="请选择" v-model="selectData.month">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                           
                                           <!--  <el-form-item>
                                                <el-button @click="dialogVisible = false;" plain="">
                                                    取消
                                                </el-button>
                                                <el-button @click="submit" type="primary">
                                                    提交
                                                </el-button>
                                            </el-form-item> -->
                                        </el-form>
                                    </el-col>
                                </el-row>
                                <!-- 商品列表 -->
                                <el-dialog :visible.sync="innerDialogVisible" append-to-body="" title="成员列表">
                                    <el-row :gutter="20">
                                        <el-col :span="10">
                                            <el-input placeholder="成员名称" v-model="innerDialogSearchData.nick_name">
                                                <template slot="prepend">
                                                    成员名称
                                                </template>
                                            </el-input>
                                        </el-col>
                                        <el-col :span="4">
                                            <el-button @click="innerDialogSearch();" icon="el-icon-search">
                                            </el-button>
                                            <el-button @click="innerDialogRefresh();" icon="el-icon-refresh">
                                            </el-button>
                                        </el-col>
                                    </el-row>
                                    <el-table :data="innerDialogTableData" @row-click="innerDialogRowClick">
                                        <el-table-column label="id" property="id">
                                        </el-table-column>
                                        <el-table-column label="姓名" property="nick_name">
                                        </el-table-column>
                                        <el-table-column label="电话" property="mobile">
                                        </el-table-column>
                                        <el-table-column label="所属部门" property="department">
                                        </el-table-column>
                                    </el-table>
                                    <div style="margin-top: 20px;">
                                        <el-pagination :current-page="innerDialogCurrentPage" :page-size="innerDialogCurrentPageSize" :page-sizes="innerDialogPageSize" :total="innerDialogTotal" @current-change="innerDialogHandleCurrentChange" @size-change="innerDialogHandleSizeChange" layout="total, sizes, prev, pager, next, jumper">
                                        </el-pagination>
                                    </div>
                                </el-dialog>
                            </el-dialog>
                            <el-dialog :visible.sync="dialogVisible3" title="编辑'内退'员工薪资">
                                <el-row :gutter="20">
                                    <el-col :offset="4" :span="16">
                                        <el-form :model="selectData" :rules="rules" label-position="left" label-width="140PX" ref="ruleForm">
                                            <el-form-item label="员工姓名" prop="asset_info.B">
                                                <el-input disabled="" placeholder="请选择用户" style="width: 240px;" v-model="selectData.asset_info.B">
                                                </el-input>
                                                <!--  <el-button @click="innerDialogVisible = true" plain="" type="primary">
                                                    选择用户
                                                </el-button> -->
                                            </el-form-item>
                                            <el-form-item label="员工手机号" prop="asset_info.X">
                                                <el-input disabled="" v-model="selectData.asset_info.X">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="基本工资" prop="asset_info.C">
                                                <el-input v-model="selectData.asset_info.C">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="临时生活补贴" prop="asset_info.D">
                                                <el-input v-model="selectData.asset_info.D">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="卫生费" prop="asset_info.E">
                                                <el-input v-model="selectData.asset_info.E">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="辅助工资" prop="asset_info.F">
                                                <el-input v-model="selectData.asset_info.F">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="应发工资" prop="salary">
                                                <el-input disabled="" v-model="selectData.salary">
                                                </el-input>
                                            </el-form-item>
                                            ==========个人应缴部分==========
                                            <el-form-item label="养老金" prop="asset_info.H">
                                                <el-input v-model="selectData.asset_info.H">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="企业年金(7-8)" prop="asset_info.I">
                                                <el-input disabled="" v-model="selectData.asset_info.I">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="医疗保险" prop="asset_info.J">
                                                <el-input v-model="selectData.asset_info.J">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="住房公积金" prop="accumulation">
                                                <el-input v-model="selectData.accumulation">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="工会费" prop="trade">
                                                <el-input v-model="selectData.trade">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="个人应缴费用小计" prop="subtotal">
                                                <el-input disabled="" v-model="selectData.subtotal">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="实发工资" prop="absenteeism">
                                                <el-input disabled="" v-model="selectData.absenteeism">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="年份" prop="year">
                                                <el-select placeholder="请选择" v-model="selectData.year">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options1">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                            <el-form-item label="月份" prop="month">
                                                <el-select placeholder="请选择" v-model="selectData.month">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                            <!-- <el-form-item>
                                                <el-button @click="dialogVisible = false;" plain="">
                                                    取消
                                                </el-button>
                                                <el-button @click="submit" type="primary">
                                                    提交
                                                </el-button>
                                            </el-form-item> -->
                                        </el-form>
                                    </el-col>
                                </el-row>
                                <!-- 商品列表 -->
                                <el-dialog :visible.sync="innerDialogVisible" append-to-body="" title="成员列表">
                                    <el-row :gutter="20">
                                        <el-col :span="10">
                                            <el-input placeholder="成员名称" v-model="innerDialogSearchData.asset_info.B">
                                                <template slot="prepend">
                                                    成员名称
                                                </template>
                                            </el-input>
                                        </el-col>
                                        <el-col :span="4">
                                            <el-button @click="innerDialogSearch();" icon="el-icon-search">
                                            </el-button>
                                            <el-button @click="innerDialogRefresh();" icon="el-icon-refresh">
                                            </el-button>
                                        </el-col>
                                    </el-row>
                                    <el-table :data="innerDialogTableData" @row-click="innerDialogRowClick">
                                        <!-- <el-table-column label="id" property="id">
                                        </el-table-column> -->
                                        <el-table-column label="姓名" property="asset_info.B">
                                        </el-table-column>
                                        <el-table-column label="电话" property="asset_info.P">
                                        </el-table-column>
                                        <el-table-column label="所属部门" property="station">
                                        </el-table-column>
                                    </el-table>
                                    <div style="margin-top: 20px;">
                                        <el-pagination :current-page="innerDialogCurrentPage" :page-size="innerDialogCurrentPageSize" :page-sizes="innerDialogPageSize" :total="innerDialogTotal" @current-change="innerDialogHandleCurrentChange" @size-change="innerDialogHandleSizeChange" layout="total, sizes, prev, pager, next, jumper">
                                        </el-pagination>
                                    </div>
                                </el-dialog>
                            </el-dialog>
                            <el-dialog :visible.sync="dialogVisible4" title="编辑'病退'员工薪资">
                                <el-row :gutter="20">
                                    <el-col :offset="4" :span="16">
                                        <el-form :model="selectData" :rules="rules" label-position="left" label-width="140PX" ref="ruleForm">
                                            <el-form-item label="员工姓名" prop="asset_info.B">
                                                <el-input disabled="" placeholder="请选择用户" style="width: 240px;" v-model="selectData.asset_info.B">
                                                </el-input>
                                                <!-- <el-button @click="innerDialogVisible = true" plain="" type="primary">
                                                    选择用户
                                                </el-button> -->
                                            </el-form-item>
                                            <el-form-item label="员工手机号" prop="asset_info.X">
                                                <el-input disabled="" v-model="selectData.asset_info.X">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="基本工资" prop="asset_info.C">
                                                <el-input v-model="selectData.asset_info.C">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="临时生活补贴" prop="asset_info.D">
                                                <el-input v-model="selectData.asset_info.D">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="卫生费" prop="asset_info.E">
                                                <el-input v-model="selectData.asset_info.E">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="辅助工资" prop="asset_info.F">
                                                <el-input v-model="selectData.asset_info.F">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="应发工资" prop="salary">
                                                <el-input disabled="" v-model="selectData.salary">
                                                </el-input>
                                            </el-form-item>
                                            ==========个人应缴部分==========
                                            <el-form-item label="养老金" prop="asset_info.H">
                                                <el-input v-model="selectData.asset_info.H">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="医疗保险" prop="asset_info.J">
                                                <el-input v-model="selectData.asset_info.J">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="企业年金(7-8)" prop="asset_info.I">
                                                <el-input disabled="" v-model="selectData.asset_info.I">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="住房公积金" prop="accumulation">
                                                <el-input disabled="" v-model="selectData.accumulation">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="工会费" prop="trade">
                                                <el-input v-model="selectData.trade">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="个人应缴部分小计" prop="subtotal">
                                                <el-input disabled="" v-model="selectData.subtotal">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="实发工资" prop="absenteeism">
                                                <el-input disabled="" v-model="selectData.absenteeism">
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item label="年份" prop="year">
                                                <el-select placeholder="请选择" v-model="selectData.year">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options1">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                            <el-form-item label="月份" prop="month">
                                                <el-select placeholder="请选择" v-model="selectData.month">
                                                    <el-option :key="item.value" :label="item.label" :value="item.value" v-for="item in options">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                           
                                            <!-- <el-form-item>
                                                <el-button @click="dialogVisible = false;" plain="">
                                                    取消
                                                </el-button>
                                                <el-button @click="submit" type="primary">
                                                    提交
                                                </el-button>
                                            </el-form-item> -->
                                        </el-form>
                                    </el-col>
                                </el-row>
                                <!-- 商品列表 -->
                                <el-dialog :visible.sync="innerDialogVisible" append-to-body="" title="成员列表">
                                    <el-row :gutter="20">
                                        <el-col :span="10">
                                            <el-input placeholder="成员名称" v-model="innerDialogSearchData.nick_name">
                                                <template slot="prepend">
                                                    成员名称
                                                </template>
                                            </el-input>
                                        </el-col>
                                        <el-col :span="4">
                                            <el-button @click="innerDialogSearch();" icon="el-icon-search">
                                            </el-button>
                                            <el-button @click="innerDialogRefresh();" icon="el-icon-refresh">
                                            </el-button>
                                        </el-col>
                                    </el-row>
                                    <el-table :data="innerDialogTableData" @row-click="innerDialogRowClick">
                                        <el-table-column label="id" property="id">
                                        </el-table-column>
                                        <el-table-column label="姓名" property="nick_name">
                                        </el-table-column>
                                        <el-table-column label="电话" property="mobile">
                                        </el-table-column>
                                        <el-table-column label="所属部门" property="department">
                                        </el-table-column>
                                    </el-table>
                                    <div style="margin-top: 20px;">
                                        <el-pagination :current-page="innerDialogCurrentPage" :page-size="innerDialogCurrentPageSize" :page-sizes="innerDialogPageSize" :total="innerDialogTotal" @current-change="innerDialogHandleCurrentChange" @size-change="innerDialogHandleSizeChange" layout="total, sizes, prev, pager, next, jumper">
                                        </el-pagination>
                                    </div>
                                </el-dialog>
                            </el-dialog>
                            <el-dialog :visible.sync="dialogVisible1" title="导入薪资">
                                <el-row :gutter="20">
                                    <el-col :offset="4" :span="16">
                                        <el-form :model="selectData" :rules="rules" label-position="left" label-width="80px" ref="ruleForm1">
                                            <el-form-item>
                                                <el-button @click="excel_import('zz')" icon="el-icon-success" plain="" size="small" style="float: right" type="primary">
                                                    在职人员薪资导入
                                                </el-button>
                                            </el-form-item>
                                            <el-form-item>
                                                <el-button @click="excel_import('wc')" icon="el-icon-success" plain="" size="small" style="float: right" type="primary">
                                                    外出人员薪资导入
                                                </el-button>
                                            </el-form-item>
                                            <el-form-item>
                                                <el-button @click="excel_import('nt')" icon="el-icon-success" plain="" size="small" style="float: right" type="primary">
                                                    内退人员薪资导入
                                                </el-button>
                                            </el-form-item>
                                            <el-form-item>
                                                <el-button @click="excel_import('bt')" icon="el-icon-success" plain="" size="small" style="float: right" type="primary">
                                                    病退人员薪资导入
                                                </el-button>
                                            </el-form-item>
                                        </el-form>
                                    </el-col>
                                </el-row>
                                <!-- 商品列表 -->
                            </el-dialog>
                            <input @change="fileChange($event)" id="excelAdd" style="display: none" type="file">
                            </input>
                        </div>
                    </main>
                    {include file="footer" /}
                </section>
            </section>
        </section>
        <script type="text/javascript">
            this.show=false;
            var app = new Vue({
              el: '#app',
              data: {
                is_role:$.inArray(3,user.role_ids), 
                tableData: [],  //表格数据
                currentPage: parseInt(querystring.currentPage) || 1, //当前页
                currentPageSize: 20,  //当前页容量
                pageSize: [20, 40, 60, 80, 100, 200], //分页大小
                total: 0, //总页数
                multipleSelection: [],  //多选项
                // 查询条件
                searchData: {
                  mobile: '',
                  nick_name: '',
                },is_pushFilters: [{
                  la: '正常',
                  value: 1
                }, {
                  text: '未发放',
                  value: 0
                }],
                 options: [
                {
                  label: '1',
                  value: '1'
                },{
                  label: '2',
                  value: '2'
                },{
                  label: '3',
                  value: '3'
                },{
                  label: '4',
                  value: '4'
                },{
                  label: '5',
                  value: '5'
                },{
                  label: '6',
                  value: '6'
                },{
                  label: '7',
                  value: '7'
                },{
                  label: '8',
                  value: '8'
                },{
                  label: '9',
                  value: '9'
                },{
                  label: '10',
                  value: '10'
                },{
                  label: '11',
                  value: '1'
                },{
                  label: '12',
                  value: '12'
                },
                 ],   //数据
        options1: [
                    {
                      label: '2019',
                      value: '2019',
                    },{
                      label: '2020',
                      value: '2020',
                    },{
                      label: '2021',
                      value: '2021',
                    },{
                      label: '2022',
                      value: '2022',
                    },{
                      label: '2023',
                      value: '2023',
                    },{
                      label: '2024',
                      value: '2024',
                    },{
                      label: '2025',
                      value: '2025',
                    },{
                      label: '2026',
                      value: '2026',
                    },{
                      label: '2027',
                      value: '2027',
                    },{
                      label: '2028',
                      value: '2028',
                    },{
                      label: '2029',
                      value: '2029',
                    },{
                      label: '2030',
                      value: '2030',
                    },
                 ],
                 options2: [
                    {
                      label: '在职',
                      value: 'zz',
                    },{
                      label: '外出',
                      value: 'wc',
                    },{
                      label: '内退',
                      value: 'nt',
                    },{
                      label: '病退',
                      value: 'bt',
                    },
                 ],    //数据
                // dialog
                dialogVisible: false,
                dialogVisible1: false,
                dialogVisible2:false,
                dialogVisible3:false,
                dialogVisible4:false,
                selectData: {
                    asset_info:{},
                },
                rules: {
                  mobile: [
                    { required: true, message: '请输入手机号码', trigger: 'blur' },
                  ],
                  password: [
                    { required: true, message: '请输入密码', trigger: 'blur' },
                  ]
                }, 
                 
                    
                // --------------- innerDialog -------------------
                innerDialogVisible: false,
                innerDialogVisible9: false,
                innerDialogVisible1: false,
                innerDialogVisible4: false,
                innerDialogTableData: [],
                innerDialogCurrentPage: 1,
                innerDialogCurrentPageSize: 10,
                innerDialogPageSize: [10, 20],
                innerDialogTotal: 0,
                innerDialogSelectData: {},
                innerDialogSearchData: {
                  asset_info:{},
                },
                type:'',
              },
              methods: {
                 //数据导入
                excel_import(map){
                        this.type = map;
                     document.getElementById('excelAdd').click(); 
                },
                // 点击代理
                handleClick(data, type) {
                    // console.log(data)
                  if (type == 'del') {
                    this.$confirm('确认删除?', '提示', { type: 'warning' }).then(_ => {
                      httpRequest('POST', 'api_remuneration/about/delete', { id: data.id }).then(resp => {
                        this.$message.success(resp.msg)
                        setTimeout(_ => {
                          location.reload();
                        }, 500);
                      })
                    })
                  }else if (type === 'edit') {
                    this.$refs.ruleForm && this.$refs.ruleForm.clearValidate();
                    this.selectData = deepCopy(data);
                    if(this.selectData.type == 'zz'){
                        this.dialogVisible = true;
                    }else if(this.selectData.type == 'wc'){
                        this.dialogVisible2 = true;
                    }else if(this.selectData.type == 'nt'){
                        this.dialogVisible3 = true;
                    }else if(this.selectData.type == 'bt'){
                        this.dialogVisible4 = true;
                    }
                  } 
                },
               
                // 跳页
                handleCurrentChange(val) {
                  this.currentPage = val;
                  this.loadTableData();
                },
                // 改变页容量
                handleSizeChange(val) {
                  this.currentPageSize = val;
                  this.loadTableData();
                },
                // 过滤
                is_pushFilterHandler(value, row, column) {
                  return row['is_push'] === value;
                },
                // 搜索
                search() {
                  this.currentPage = 1;
                  this.loadTableData();
                },
                // 重置
                refresh() {
                  this.currentPage = 1;
                  for (var key in this.searchData) {
                    this.searchData[key] = ''
                  }
                  this.loadTableData();
                },
                // 多选监听
                handleSelectionChange(val) {
                  this.multipleSelection = val;
                },
                // 批量操作
                multiOperate(type) {

                  let ids = this.multipleSelection.map(item => item.id);
                  this.$confirm('确认批量操作?', '提示', { type: 'warning' }).then(_ => {
                    httpRequest('POST', 'api_remuneration/about/batch_' + type, { id: ids }).then(resp => {
                      this.$message.success(resp.msg);
                      setTimeout(_ => {
                        location.reload();
                      }, 500);
                    })
                  })
                },
                // 新增
                goAdd() {
                  this.selectData = {
                    asset_info: '',
                    overtime_wage: '',
                    mission_allowance: '',
                    belate: '',
                    salary: '',
                    absenteeism: '',
                    start_time: '',
                    users: '',
                    end_time: '',
                    expiry_time:'',
                  };
                  this.dialogVisible = true;
                  this.$refs.ruleForm && this.$refs.ruleForm.clearValidate();

                },
                // 薪资导入
                 channel() {
                  this.dialogVisible1 = true;
                  this.$refs.ruleForm1 && this.$refs.ruleForm1.clearValidate();

                },
                // 加载数据
                loadTableData() {
                  httpRequest('POST', 'api_remuneration/about/index', this.searchData, {
                    'page-num': this.currentPage,
                    'page-limit': this.currentPageSize
                  }).then(resp => { 
                    this.tableData = resp.data;
                    this.total = resp.page.data_count || 0;
                  })
                },
                submit() {
                  this.$refs.ruleForm.validate(valid => {
                    if (valid) {
                      // 通过校验
                      let router = this.selectData.id ? 'api_remuneration/about/update' : 'api_remuneration/about/save';
                      httpRequest('POST', router, this.selectData).then(resp => {
                        this.$message.success(resp.msg)
                        setTimeout(_ => {
                          location.reload();
                        }, 500)
                      });
                    } else {
                      return false;
                    }
                  });
                },
                fileChange(el) {
                  Array.from(el.target.files).forEach(item => {
                    let formData = new FormData();
                    formData.append('file', item);
                    formData.append('save_path', userImagePath);
                    formData.append('is_rename', 1);
                    httpRequest('POST', 'api_systems/helper/upload_file', formData).then(resp => {
                    httpRequest('POST', 'api_remuneration/about/lead', { excel_pass: resp.data.file_path,type:app.type }).then(resp => {console.log(resp)})
                    })
                  })
                },
                fileClick() {
                  document.getElementById('imgAdd').click();
                },
                // --------------- innerDialog -------------------
                // 跳页
                innerDialogHandleCurrentChange(val) {
                    this.innerDialogCurrentPage = val;
                    this.innerDialogLoadTableData();
                },
                // 改变页容量
                innerDialogHandleSizeChange(val) {
                    this.innerDialogCurrentPageSize = val;
                    this.innerDialogLoadTableData();
                },
                // 某一行被点击
                innerDialogRowClick(row) {
                  this.selectData.uid = row.id;
                  this.selectData.nick_name = row.nick_name;
                  this.selectData.goods_info = row;
                  this.selectData.asset_info = row.asset_info;
                  
                  this.innerDialogVisible = false;
                  this.innerDialogVisible1 = false;
                  this.innerDialogVisible9 = false;
                },
                // 搜索
                innerDialogSearch() {
                  this.innerDialogCurrentPage = 1;
                  this.innerDialogLoadTableData();
                },
                // 重置
                innerDialogRefresh() {
                    this.innerDialogCurrentPage = 1;
                  for (let key in this.innerDialogSearchData) {
                    this.innerDialogSearchData[key] = ''
                  }
                  this.innerDialogLoadTableData();
                }, 
              },
            mounted() {
                this.loadTableData(); 
              }
            });
        </script>
    </body>
</link>