<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=no, width=device-width">
  <meta name="keywords" content="wancllshop">
  <title></title>
  <!-- 公共资源文件引入 -->
  <link rel="stylesheet" href="/public/static/common/css/loading.css" type="text/css">

  <link rel="stylesheet" href="/public/static/wap/aui/css/aui.css" type="text/css">
  <link rel="stylesheet" href="/public/static/wap/css/wap.css" type="text/css">
  <link rel="stylesheet" type="text/css" href="/public/static/wap/aui/css/aui-flex.css" />

  <!-- 图标库 -->
  <link rel="stylesheet" type="text/css" href="/public/static/common/css/ali_icon/iconfont.css" />

  <script src="/public/static/jquery-3.2.1.min.js" type="text/javascript"></script>
  <script src="/public/static/layer-v3.1.1/layer/layer.js" type="text/javascript"></script>
  <script src="/public/static/vue/vue-2.5.15/vue.min.js" type="text/javascript"></script>


  <script src="/public/static/common/script/common.js" type="text/javascript"></script>
  <script src="/public/static/common/script/config.js" type="text/javascript"></script>
  <script src="/public/static/common/script/wapRouter.js" type="text/javascript"></script>

  <script src="/public/static/axios/axios.min.js"></script>
  <script src="/public/static/common/script/httpPromise.js"></script>
  <link rel="icon" id="icon-img" href="" type="image/x-icon"/>


  <!-- <script>
    document.title = getStorage('systemParams').system_title || ''
    document.getElementById("icon-img").href = getStorage('systemParams').web_icon;
  </script> -->
<link rel="stylesheet" href="/public/static/OwlCarousel2-2.2.1/assets/owl.carousel.min.css">
<link rel="stylesheet" href="/public/static/OwlCarousel2-2.2.1/assets/owl.theme.default.min.css">
<script src="/public/static/OwlCarousel2-2.2.1/owl.carousel.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style type="text/css">
	.no-order-contetn {
		width: 100%;
		height: 800px;
	}

	.no-order-contetn img {
		margin-bottom: 12px;
	}

	.no-order-contetn .content {
		width: 170px;
		margin: 0 auto;
		position: relative;
		top: 250px;
	}

	.no-order-contetn .button {
		width: 116px;
		height: 34px;
		text-align: center;
		display: block;
		line-height: 34px;
		color: #ffffff;
		border-radius: 34px;
		margin: 0 auto;
		background-color: #108ee9;
	}

	.no-order-contetn .button:hover {
		background-color: #007bd3;
	}

	.search-none-content {
		background-color: #ffffff;
		margin-top: 24px;
		margin-bottom: 60px;
		border-radius: 4px;
		padding: 24px 22px 35px 22px;
	}

	.search-none-content .search-none-cont2 .cont2-title {
		margin-top: 0px;
		border-left: 3px solid #108ee9;
		color: #444444;
		line-height: 1.25;
		margin-bottom: 18px;
	}

	.search-none-content .search-none-cont2 li {
		width: 210px;
		margin-right: 25px;
		float: left;
		border: 1px solid #efeeee;
		box-sizing: border-box;
	}

	.search-none-content .search-none-cont2 li:nth-child(5n) {
		margin-right: 0px;
	}

	.search-none-content .search-none-cont2 li .img-top {
		border-bottom: 1px solid #efeeee;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom {
		width: 208px;
		height: 107px;
		box-sizing: border-box;
		padding: 14px 9px 0px 9px;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom .title {
		color: rgb(40, 40, 40);
		line-height: 1.3;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom .price {
		float: left;
		color: rgb(221, 9, 9);
		font-size: 21px;
		margin-bottom: 0px;
		margin-top: 0px;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom .price span {
		text-decoration: line-through;
		color: rgb(85, 85, 85);
		line-height: 27px;
		display: inline-block;
		vertical-align: top;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom .mun {
		float: right;
		color: rgb(85, 85, 85);
		line-height: 27px;
	}

	.order-list-content {
		padding-left: 15px;
		padding-right: 15px;
		padding-top: 25px;
	}

	.order-list-content .order-list-top {
		margin-bottom: 40px;
	}

	.order-list-content .order-list-top li {
		float: left;
		width: 130px;
		margin-right: 50px;
	}

	.order-list-content .order-list-top li:last-child {
		margin-right: 0px;
	}

	.order-list-content .order-list-top li .left {
		width: 54px;
		height: 54px;
		text-align: center;
		line-height: 54px;
		background-color: #f4f4f4;
		border-radius: 100%;
	}

	.order-list-content .order-list-top li .left i {
		color: #108ee9;
		font-size: 32px;
	}

	.order-list-content .order-list-top li .right {
		color: rgb(40, 40, 40);
		float: left!important;
		margin-right: 12px!important;
	}

	.order-list-content .order-list-top li .right .title {}

	.order-list-content .order-list-top li .right .mun {
		line-height: 1;
		text-align: center;
	}

	.order-list-class {
		background-color: #f2f2f2;
		height: 45px;
	}

	.order-list-class li {
		line-height: 45px;
		text-align: center;
		color: rgb(0, 0, 0);
	}

	.order-list-class li.price {
		width: 390px;
	}

	.order-list-class li.mun {
		width: 75px;
	}

	.order-list-class li.money {
		width: 132px;
	}

	.order-list-class li.type {
		width: 98px;
	}

	.order-list-class li.action {
		width: 158px;
	}

	.search-none-content .search-none-cont2 li {
		width: 210px;
		margin-right: 25px;
		float: left;
		border: 1px solid #efeeee;
		box-sizing: border-box;
	}

	.search-none-content .search-none-cont2 li:nth-child(5n) {
		margin-right: 0px;
	}

	.search-none-content .search-none-cont2 li .img-top {
		border-bottom: 1px solid #efeeee;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom {
		width: 208px;
		height: 107px;
		box-sizing: border-box;
		padding: 14px 9px 0px 9px;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom .title {
		color: rgb(40, 40, 40);
		line-height: 1.3;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom .price {
		float: left;
		color: rgb(221, 9, 9);
		font-size: 21px;
		margin-bottom: 0px;
		margin-top: 0px;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom .price span {
		text-decoration: line-through;
		color: rgb(85, 85, 85);
		line-height: 27px;
		display: inline-block;
		vertical-align: top;
	}

	.search-none-content .search-none-cont2 li .cont2-bottom .mun {
		float: right;
		color: rgb(85, 85, 85);
		line-height: 27px;
	}



	/****************************************黄*************************************/

	.order-management {
		width: 930px;
		margin: 0 auto;
		background: #fff;
		border-radius: 10px;
		padding: 30px;
		box-sizing: border-box;
	}

	.order-management .column-name {
		padding-bottom: 15px;
		border-bottom: 1px solid #eeeeee;
		font-size: 14px;
		color: #282828;
		padding-left: 10px;
		font-weight: bolder;
	}

	.order-list-content .menu {
		display: table;
		color: #1e1e1e;
		background: #f2f2f2;
		padding-top: 10px;
		padding-bottom: 10px;
	}

	.order-list-content .menu .price {
		width: 350px;
		display: table-cell;
		text-align: center;
	}

	.order-list-content .menu .num {
		width: 70px;
		display: table-cell;
		text-align: center;
	}

	.order-list-content .menu .operating {
		width: 120px;
		display: table-cell;
		text-align: center;
	}

	.order-list-content .menu .amount {
		width: 120px;
		display: table-cell;
		text-align: center;
	}

	.order-list-content .menu .state {
		width: 100px;
		display: table-cell;
		text-align: center;
	}

	.order-list-content .menu .handle {
		width: 100px;
		display: table-cell;
		text-align: center;
	}

	.all-orders-container .a-order {
		margin-top: 15px;
	}

	.all-orders-container .time-num {
		display: table;
		padding-top: 10px;
		padding-bottom: 10px;
		color: #636363;
		background: #f2f2f2;
		width: 860px;
		font-size: 12px;
	}

	.all-orders-container .time-num .time {
		display: table-cell;
		padding-left: 15px;
		width: 220px;
	}

	.all-orders-container .time-num .num {
		display table-cell;
		padding-left: 40px;
	}

	.all-orders-container .goods-txet-wrap {
		display: table;
		color: #101010;
		border: 1px solid #f2f2f2;
		box-sizing: border-box;
		width: 860px;
	}

	.all-orders-container .goods-txet-wrap .all-goods {
		display: table-cell;
		width: 540px;
		margin-top: 15px;
	}

	.all-orders-container .goods-txet-wrap .a-goods {
		padding: 10px 15px;
		box-sizing: border-box;
		border-bottom: 1px solid #f2f2f2;
		padding-right: 0;
	}

	.all-orders-container .goods-txet-wrap .a-goods:last-child {
		border-bottom: 0;
	}

	.all-orders-container .goods-txet-wrap .a-goods .img {
		width: 100px;
		height: 88px;
		border: 1px solid #d2d2d2;
		text-align: center;
		display: table-cell;
		vertical-align: middle;
		box-sizing: border-box;
		cursor: pointer;
	}

	.all-orders-container .goods-txet-wrap .a-goods .img img {
		width: 86px;height: 86px;
	}

	.all-orders-container .goods-txet-wrap .a-goods .txet {
		display: table-cell;
		vertical-align: middle;
		padding-left: 10px;
		width: 230px;
		vertical-align: middle;
		cursor: pointer;
	}

	.all-orders-container .goods-txet-wrap .a-goods .txet .title {
		line-height: 22px;
		height: 44px;
		overflow: hidden;
		font-size: 12px;
	}

	.all-orders-container .goods-txet-wrap .a-goods .txet .amount {
		margin-top: 5px;
	}

	.all-orders-container .goods-txet-wrap .a-goods .num {
		display: table-cell;
		vertical-align: middle;
		width: 70px;
		text-align: center;
		vertical-align: middle;
	}

	.all-orders-container .goods-txet-wrap .a-goods .a-operation {
		display: table-cell;
		vertical-align: middle;
		width: 120px;
		text-align: center;
	}

	.all-orders-container .goods-txet-wrap .a-goods .a-operation .btn {
		width: 76px;
		height: 26px;
		background: #108ee9;
		color: #fff;
		border-radius: 13px;
		text-align: center;
		line-height: 26px;
		cursor: pointer;
		font-size: 12px;
		padding: 0px;
	}

	.all-orders-container .goods-txet-wrap .a-goods .a-operation .function {
		color: #a7a5a5;
		margin-top: 10px;
		cursor: pointer;
		font-size: 12px;
	}

	.all-orders-container .goods-txet-wrap .a-goods .a-operation .function:hover {
		color: #108ee9;
	}

	.all-orders-container .goods-txet-wrap .info {
		display: table-cell;
		width: 120px;
		text-align: center;
		box-sizing: border-box;
		border-left: 1px solid #f2f2f2;
		vertical-align: middle;
	}

	.all-orders-container .goods-txet-wrap .info .all-num {
		font-size: 12px;
		color: #797878;
	}

	.all-orders-container .goods-txet-wrap .info .price {
		margin-top: 10px;
	}

	.all-orders-container .goods-txet-wrap .info .freight {
		color: #797878;
		margin-top: 10px;
		font-size: 12px;
	}

	.all-orders-container .goods-txet-wrap .state {
		display: table-cell;
		width: 100px;
		text-align: center;
		box-sizing: border-box;
		border-left: 1px solid #f2f2f2;
		vertical-align: middle;
		color: #2e9cec;
	}

	.all-orders-container .goods-txet-wrap .operation {
		display: table-cell;
		width: 100px;
		text-align: center;
		box-sizing: border-box;
		border-left: 1px solid #f2f2f2;
		vertical-align: middle;
	}

	.all-orders-container .goods-txet-wrap .operation .btn {
		width: 76px;
		height: 26px;
		background: #108ee9;
		color: #fff;
		border-radius: 13px;
		text-align: center;
		line-height: 26px;
		cursor: pointer;
		font-size: 12px;
		padding: 0px;
	}

	.all-orders-container .goods-txet-wrap .operation .function {
		color: #a7a5a5;
		margin-top: 10px;
		cursor: pointer;
		font-size: 12px;
	}

	.all-orders-container .goods-txet-wrap .operation .function:hover {
		color: #108ee9;
	}


	/*物流页面 给body、overhidden、content-wl 加上on*/

	body.on {
		overflow-x: hidden;
		overflow-y: hidden;
	}

	.overhidden.on {
		background-color: rgba(0, 0, 0, 0.5);
		-webkit-transition: background-color 0.35s;
		transition: background-color 0.35s;
		top: 0px;
		bottom: 0px;
		left: 0px;
		right: 0px;
		width: 100%;
	}

	.overhidden {
		background-color: transparent;
		position: fixed;
		top: 0px;
		bottom: 0px;
		left: 0px;
		width: 25px;
		z-index: 100;
	}

	.order_null_img {
		margin-top: 200px;
	}

	.order_null_text {
		width: 100%;
		position: absolute;
		top: 252px;
		color: #666;
	}

	.order_null_box {
		margin-bottom: 150px;
	}

	.w900 {
		width: 900px;
		margin: 0 auto;
	}

	.content-wl.on {
		display: block;
	}

	.content-wl {
		display: none;
		background-color: #ffffff;
		padding: 50px 84px;
		width: 900px;
		min-height: 656px;
		position: fixed;
		top: 10%;
		left: 50%;
		margin-left: -450px;
		z-index: 99999999;
	}

	.content-wl .top-title {
		font-size: 22px;
		color: #000000;
		margin-bottom: 16px;
	}

	.content-wl .top-title span {
		color: #108ee9;
	}

	.content-wl .text {
		color: #969595;
		font-size: 14px;
	}

	.content-wl .info {
		margin-top: 40px;
		width: 740px;
	}

	.content-wl .info ul {
		margin-top: -10px;
		height:451px;
		overflow-y:auto;
	}

	.content-wl .info li {
		padding-left: 27px;
		border-left: 1px solid #d2d2d2;
		line-height: 30px;
		color: rgb(122, 121, 121);
		position: relative;
	}

	.content-wl .info li.on:before {
		background-color: #108ee9;
	}

	.content-wl .info li:before {
		content: "";
		position: absolute;
		left: -8px;
		border: 5px solid #ffffff;
		top: 22px;
		width: 5px;
		height: 5px;
		border-radius: 100%;
		background-color: #d2d2d2;
		box-sizing: content-box;
	}

	.content-wl .info li>div {
		border-bottom: 1px dashed #d2d2d2;
	}

	.content-wl .info li:last-child {
		padding-bottom: 40px!important;
		border-bottom: 0px;
	}

	.content-wl .button {
		display: inline-block!important;
		margin: 0 auto;
		width: 144px;
		height: 40px;
		border-radius: 40px;
		text-align: center;
		line-height: 40px;
		color: #ffffff;
		background-color: #108ee9;
		margin: 70px 50px 0;
		display: block;
	}
	.content-wl .button:hover {
		background-color: #097acb;
	}
</style>

</head>

<body>
	{include file="/index/header" /}
	<div id="app">
		<!-- 地址详情 -->
		<div class="overhidden" :class="{on:(logistic == 1)}"></div>
		<div class="w900 content-wl" :class="{on:(logistic == 1)}">
			<div class="top-title">物流状态：
				<span v-text="logisticsStatus[info.state]"></span>
			</div>
			<p class="text margin-btn-10">{{express_type | expressTypeFilter}}</p>
			<p class="text">{{express_type}}</p>
			<div class="info">
				<ul>
					<li class="padding-top-15 font-size-14" v-for="(m,key) in info.data" :key="key">
						<div class="padding-btn-15">
							<span v-text="m.time"></span>
							<br/>
							<span v-text="m.context"></span>
						</div>
					</li>
				</ul>
			</div>
			<button class="button transition" @click="closeThis()">确定</button>
		</div>
		<div class="overhidden" :class="{on:(cancelOrder == 1)}"></div>
		<div class="w900 content-wl" :class="{on:(cancelOrder == 1)}">
			<div class="">
				<ul>
					<li class="padding-top-15 font-size-14 border-btn">
						<span class="font-w font-size-18  grey-text text-darken-3 padding-btn-15 inline-black">请选择不想购买的原因</span>
					</li>
					<li class="padding-tt-15 font-size-14 border-btn grey-text text-darken-2" v-for="(cancelOrdertext,reasonkey) in cancelOrdertexts" :key="reasonkey" @click="setfrm(reasonkey)">
						<i class="iconfont icon-roundcheckfill padding-lr-15" v-if="reasonIcon == reasonkey"></i>
						<i class="iconfont icon-yuanxingweixuanzhong padding-lr-15" v-else></i>
						<span class=" " v-text="cancelOrdertext.reason"></span>
					</li>
					<li class="padding-tt-15 font-size-14 red-text" style="height: 52px;">
							<span class="" v-if="redtext">请选择取消订单原因</span>
						</li>
				</ul>
			</div>
			<button class="button transition border-grey " @click="closecancel()" style="margin-left: 170px;background: #fff;border: 1px solid #dedede;color: #616161 !important">取消</button>
			<button class="button transition" @click="closepage()">确定</button>
		</div>
		<div class="w1200 margin-tt-15 over  black-text">
				<div class="left">
						<!-- 个人信息卡 -->
						<div class="card-title-wrap">
								<img  src="/public/static/portal/img/title-back.png" class="responsive-img">
								<div class="margin-10 over card-text-wrap">
										<div class="ridius-img left margin-15">
												<img :src="user.avatar" alt="">
										</div>
										<div class="left margin-top-15">
												<div class="font-size-18 margin-top-15 white-text" v-text="user.mobile"></div>
												<div class="blue lighten-1 margin-top-5" style="border-radius: 4px;padding: 2px 4px;">
														<img src="/public/static/portal/img/lr.png" alt="">
														<span class="font-size-12 white-text" v-text="level"></span>
												</div>
										</div>
								</div>
								<div class="rate-line font-size-12 blue-text text-lighten-5">
										<div class="rataing-nember  margin-15" v-text=" '成长值  ' + score"></div>
										<div class="ratas-nember right"></div>	
								</div>
						</div>
						<div class="white grey-text text-darken-3 margin-top-15" style="border-radius: 5px">
								<div class="card-right-nav-box  margin-10 padding-tt-10" style="border: none">
										<div class="card-right-nav">
												<div class="font-size-18 over margin-tt-10">
														<i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
														<span class="left margin-top-5">交易管理</span>
												</div>
												<ul class="card-right-nav-ul">
														<li class="margin-tt-13" @click="goto('cart_list')">购物车</li>
														<li class="margin-tt-13" @click="goto('order_list')">我的订单</li>
														<li class="margin-tt-13" @click="goto('comment_list')">我的评价</li>
												</ul>
										</div>
								</div>
								<div class="card-right-nav-box  margin-10 padding-tt-10">
										<div class="card-right-nav">
												<div class="font-size-18 over margin-tt-10">
																<i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
														<span class="left margin-top-5">账号管理</span>
												</div>
												<ul class="card-right-nav-ul">
														<li class="margin-tt-13" @click="goto('setting')">个人信息</li>
														<li class="margin-tt-13" @click="goto('account')">账号安全</li>
														<li class="margin-tt-13" @click="goto('idcard_auth')" >实名认证</li>
														<li class="margin-tt-13" @click="goto('address_list')">地址管理</li>
														<li class="margin-tt-13"  @click="goto('collection_list')">我的收藏</li>
														<li class="margin-tt-13"  @click="goto('level')">成长值<span class="blue-text text-lighten-1" v-text="'('+score+')'"></span></li>
														<li class="margin-tt-13"  @click="goto('bind')">第三方账户</li>
												</ul>
										</div>
								</div>
								<div class="card-right-nav-box margin-10 padding-tt-10">
										<div class="card-right-nav">
												<div class="font-size-18 over margin-tt-10">
																<i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
														<span class="left margin-top-5">资产管理</span>
												</div>
												<ul class="card-right-nav-ul">
														<li class="margin-tt-13" @click="goto('wallet')">我的钱包</li>
														<li class="margin-tt-13" @click="goto('bankcard_list')">我的银行卡</li>
														<li class="margin-tt-13" @click="goto('my_coupon_list')">我的优惠券<span class="blue-text text-lighten-2"></span></li>
												</ul>
										</div>
								</div>
						</div>
				</div> 
			<div class="right right-content">
				<div class="padding-15 white">
					<div class="margin-15 font-size-18 black-text padding-tt-5" style="border-bottom:2px solid #eeeeee;padding-bottom:15px!important;">我的订单</div>

					<div class="order-list-content">
						<div class="order-list-top">
							<ul class="clearfix">
								<li @click="changeStatus(1)" class="pointer">
									<div class="left margin-right-10">
										<i class="iconfont icon-daifukuan"></i>
									</div>
									<div class="right">
										<p class="title font-size-16 margin-btn-5">待付款</p>
										<p class="mun font-size-20" v-text="orderCount.wait_pay_num">0</p>
									</div>
								</li>
								<li @click="changeStatus(2)" class="pointer">
									<div class="left margin-right-10">
										<i class="iconfont icon-daifahuo"></i>
									</div>
									<div class="right">
										<p class="title font-size-16 margin-btn-5">待发货</p>
										<p class="mun font-size-20" v-text="orderCount.wait_ship_num">0</p>
									</div>
								</li>
								<li @click="changeStatus(3)" class="pointer">
									<div class="left margin-right-10">
										<i class="iconfont icon-yifahuo"></i>
									</div>
									<div class="right">
										<p class="title font-size-16 margin-btn-5">待收货</p>
										<p class="mun font-size-20" v-text="orderCount.wait_finish_num">0</p>
									</div>
								</li>
								<li @click="changeStatus(4)" class="pointer">
									<div class="left margin-right-10">
										<i class="iconfont icon-daipingjia"></i>
									</div>
									<div class="right">
										<p class="title font-size-16 margin-btn-5">待评价</p>
										<p class="mun font-size-20" v-text="orderCount.wait_comment_num">0</p>
									</div>
								</li>
								<li @click="changeStatus(-1)" class="pointer">
									<div class="left margin-right-10">
										<i class="iconfont icon-shouhou"></i>
									</div>
									<div class="right">
										<p class="title font-size-16 margin-btn-5">售后</p>
										<p class="mun font-size-20" v-text="orderCount.return_goods_num">0</p>
									</div>
								</li>
							</ul>
						</div>
						<div class="menu">
							<div class="price">商品（单价）</div>
							<div class="num">数量</div>
							<div class="operating">商品操作</div>
							<div class="amount">订单金额（￥）</div>
							<div class="state">订单状态</div>
							<div class="handle">操作</div>
						</div>
						<div v-if="haveNoData" class="over margin-btn-15">
							<div class="center relative margin-btn-15">
								<div class="order_null_text">空空如也~</div>
								<img src="/public/static/portal/img/404.png" alt="" class="responsive-img order_null_img">
								<br>
								<div class="setting-go-btn white-text blue inline-black margin-15 order_null_box pointer" @click="goto('index')">去逛逛</div>
							</div>
						</div>
						<div v-else class="all-orders-container" v-for="(order,key) in orders" :key="key">
							<div class="a-order">
								<div class="time-num">
									<div class="time" v-text=" '创建订单时间' + order.create_time"></div>
									<div class="num" v-text=" '订单编号： ' + order.order_no"></div>
								</div>
								<div class="goods-txet-wrap" v-for="(goods,key) in order.order_goods_info" :key="key">
									<div class="all-goods">
										<div class="a-goods">
											<div class="img" @click="goto('goods_detail',{goodsId:goods.goods_id})">
												<img :src="goods.thum" />
											</div>
											<div class="txet">
												<div class="title" v-text="goods.name"></div>
												<p class="amount" v-text="goods.sell_price"></p>
											</div>
											<div class="num" v-text=" '×' + goods.num"></div>
											<div class="a-operation">
												<div class="function" @click="goto('order_detail',{orderId:order.id})">查看详情</div>
												<div class="btn margin-tt-5"  style="box-shadow: none"  @click.stop="refund(order,goods.goods_id) " v-if="(order.status==2 || order.status==3) && (goods.return_goods_status == 0 || goods.return_goods_status == 2)">
										退货</div>
												<div class="btn margin-tt-5"  style="box-shadow: none"  @click.stop="goComment(order.id,goods)" v-if="order.status == 4 && goods.is_comment == 0">评论</div>
											</div>
										</div>
									</div>
									<div class="info">
										<div class="all-num">共<span v-text="goods.num"></span>件商品</div>
										<div class="price" v-text="goods.real_price"></div>
										<div class="freight" v-text=" '(含运费'+ order.freight_money + ')'">（含运费10.00）</div>
									</div>
									<div class="state" v-if="goods.return_goods_status == 0">{{order | orderStatus}}</div>
									<div class="state" v-if="goods.return_goods_status == 1">申请退货</div>
									<div class="state" v-if="goods.return_goods_status == 2">拒绝退货</div>
									<div class="state" v-if="goods.return_goods_status == 3">已退货</div>
									<div class="operation">
										<div class="btn margin-tt-5" style="box-shadow: none" @click.stop="pay(order) " v-if="order.status==1 ">立即付款</div>
										<div class="function margin-tt-5" @click.stop="cancel(order) " v-if="order.status==1 ">取消订单</div>
										<div class="btn margin-tt-5" style="box-shadow: none"  @click.stop="remind(order) " v-if="order.status==2">提醒发货</div>
										<div class="btn active margin-tt-5" style="box-shadow: none"  @click.stop="finish(order) " v-if="order.status==3">确认收货</div>
										<div class="function margin-tt-5" @click.stop="goLogistics(order) " v-if="order.status==3 ">查看物流</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="fen-page" style="margin-top:24px;text-align:left;margin-left:23px;margin-bottom:12px;" v-if="page_count > page_size">
						<span class="pointer" v-for="(page,key) in pages" v-text="page" @click="getPage(page)" :class="{active: (activeclass == page)}"></span>
					</div>
				</div>
				<div class="margin-top-15">
					<img src="/public/static/portal/img/lien-img.png" alt="" class="responsive-img">
				</div>
			</div>
		</div>

		<div class="w1200">
			<div class="search-none-content white">
				<div class="search-none-cont2">
					<h4 class="cont2-title font-size-16 padding-left-10">为你推荐</h4>
					<div class="cont2-list">
						<ul>
							<li v-for="guessGood in guessGoods" @click="goto('goods_detail',{goodsId:guessGood.id})">
								<a class="img-top">
									<img class="img-class" :src="guessGood.thum">
								</a>
								<div class="cont2-bottom">
									<a class="title font-size-14 margin-btn-15" v-text="guessGood.name"></a>	
									<div class="clearfix">
										<h5 class="price" v-text="'￥' + guessGood.sell_price"><span class="font-size-10 margin-left-5" v-text="'￥' + guessGood.sell_price"></span></h5>
										<p class="mun font-size-12" v-text="'月销量：'+guessGood.sell_num"></p>
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	{include file="index/footer" /}
	<script>
		var page = 1;
		var logisticsMap = {
			huitongkuaidi: '百世汇通',
			ems: 'EMS',
			shentong: '申通快递',
			shunfeng: '顺丰快递',
			tiantian: '天天快递',
			yuantong: '圆通快递',
			yunda: '韵达快运',
			zhongtong: '中通速递'
		}
		var cancelOrdertext=[
			{reason:'我不想买了'},
			{reason:'信息填写错误，重新下单'},
			{reason:'商家缺货'},
			{reason:'其他原因'}
		]
		var app = new Vue({
			el: '#app',
			data: {
				activeclass:1,
				redtext:false,
				orderids:'',
				reasonIcon:10,
				cancelOrdertexts:cancelOrdertext,
				cancelOrder:0,
				logistic: 0,
				activeFooterIndex: 4,
				user: user,
				level:'',
				score:'',
				express_type: {},
				orderCount: {
					wait_comment_num: 0,
					wait_finish_num: 0,
					wait_pay_num: 0,
					wait_ship_num: 0
				},
				title: (querystring.status == -1) ? '退款/退货' : '我的订单',
				activeStatus: querystring.status,
				haveNoData: false,
				orders: [],
				pages: [],
				page_count:'',
				page_size:'',
				orderStatu: "加载中",
				info: {
					data: []
				},
				// 运输状态
				logisticsStatus: [
					'运输中',
					'揽件中',
					'疑难(货物寄送过程出了问题)',
					'已签收',
					'退签中',
					'派件中',
					'退回中',
				],
				guessGoods:[],
			},
			methods: {
				// 取消取消订单
				closecancel:function(){
					app.cancelOrder = 0;
				},
				// 取消订单
				closepage:function(){
					if (app.reasonIcon == 10) {
						app.redtext = true;
						return;
					}
					var cancel_reasons = app.cancelOrdertexts[app.reasonIcon].reason
					httpRequest('POST', 'api_orders/cancel_orders/user_cancel', {
							order_id: this.orderids.id,
							cancel_reason:cancel_reasons
						},function (resp) {
						   app.cancelOrder = 0;
							layer.msg(resp.msg);
							setTimeout(function(){
								app.activeStatus = 0;
								page = 1;
							    app.orderids = '';
								app.orders = [];
								loadOrders(page);
							}, 500)
						})
				},
				// 设置取消订单信息
				setfrm:function(data){
					app.reasonIcon = data
				},

				// 改变查询的订单状态
				changeStatus: function (status) {
					this.activeStatus = status;
					page = 1;
					this.orders = [];
					loadOrders(page);
				},
				goOrderDetail: function (order) {
					goto('order_detail', { orderId: order.id });
				},
				//评论
				goComment: function (orderId, goods) {
					setStorage('goods', goods, sessionStorage);
					goto('comment', { orderId: orderId });
				},
				//查看物流
				goLogistics: function (order) {
					// setStorage('order', order, sessionStorage);
					// goto('logistics');
					var that = this;
					httpRequest("post", 'api_query/transport/read_by_kd100', {
						express_type: order.express_type,
						express_no: order.express_no
					},function (resp) {
						app.express_type = order.express_type,
							console.log(resp);
						if (resp.data.status == 0) {
							layer.msg(resp.data.message)
						} else if (resp.data.status == 2) {
							layer.msg('接口异常');
						} else {
							that.info = resp.data;
							console.log(app.info);

							app.logistic = 1;
						}
					})
				},
				closeThis: function () {
					app.logistic = 0;
				},
				// 取消订单
				// 暂时保存订单信息
				cancel: function (order) {
					this.orderids = order;
					this.cancelOrder = 1
				},
				//付款
				pay: function (order) {
					httpRequest('POST', 'api_orders/pay/pre_pay', {
						order_id: order.id
					},function (resp) {
						goto('pay_select', { order_no: order.order_no, total_money: order.total_money, order_id: order.id });
					})
				},
				// 申请退款
				refund: function (order,id) {
					setStorage('order', order, sessionStorage)
					goto('order_refund',{goodsId:id});
				},
				//提醒发货
				remind: function (order) {
					httpRequest('POST', 'api_orders/tip_deliver/tip', {
						order_id: order.id
					},function (resp) {
						layer.msg(resp.msg)
					})
				},
				// 确认收货
				finish: function (order) {
					layer.confirm('确认收货?', { title: '提示' }, function (index) {
						layer.close(index);
						httpRequest('POST', 'api_orders/sign_orders/user_sign', {
							order_id: order.id
						},function (resp) {
							layer.msg(resp.msg);
							setTimeout(function () {
								app.activeStatus = 0;
								page = 1;
								app.orders = [];
								loadOrders(page);
							}, 500)
						})
					})
				},
				// 商品详情
				goGoodsDetail: function (goods) {
					goto('goods_detail', { goodsId: goods.goods_id })
				},
				getPage: function (data) {
					app.pages = []
					this.activeclass = data
					app.orders = []
					loadOrders(data)
				}
			},
			filters: {
				orderStatus: function (order) {
					var str = '';
					if (order.status == 1) {
						str += '等待付款';
					} else if (order.status == 2) {
						str += '等待发货';
					} else if (order.status == 3) {
						str += '已发货';
					} else if (order.status == 4) {
						str += '交易完成';
					} else if (order.status == 9) {
						str += '订单已取消';
					}
					return str;
				},
				expressTypeFilter: function (str) {
					return (str ? (logisticsMap[str] || '其他快递') : '')
				}
			},
			mounted: function () {
				httpRequest('POST', 'api_query/orders/count',{},function (resp) {
						console.log(resp);
						app.orderCount = resp.data;
					})
					httpRequest('POST', 'api_query/users/asset',{},function (resp) {
						app.level = resp.data.level;
						app.score = resp.data.score;
					});
			},
		})
		loadOrders = function (pages) {
			//   document.body.onscroll = null;
			var page = pages || 1
			var data = {};
			if (app.activeStatus == -1) {
                // 售后订单
                data.is_has_return_goods = 1;
            } else {
                if (app.activeStatus == 1 || app.activeStatus == 2 || app.activeStatus == 3) {
                    // 待付款 待发货 待收货
                    data.status = app.activeStatus;
                } else if (app.activeStatus == 4) {
                    // 待评价订单
					data.status = app.activeStatus;
                    data.is_comment = 0
                }
			}
			httpRequest('POST', 'api_orders/orders/lists', data,function (resp) {
				if (resp.data.length > 0) {
					var data_count = resp.page.data_count;
					app.page_count = data_count;
					app.page_size = resp.page.page_limit;
					pagesStatus(data_count);
					app.haveNoData = false;
					resp.data.forEach(function (item) {
						app.orders.push(item);
					})
				} else {
					app.haveNoData = true;
				}
				},{
				'page-num': page,
				'page-limit': 5
			})
				httpRequest('POST','api_goods/goods/lists',{is_top:1},function(resp){
                    app.guessGoods = resp.data;
                },{'page-num':1,'page-limit':4})
		}
		pagesStatus = function (data) {
			app.pages = []
			var page_li = Math.ceil(data / 5);
			if (!data) {
				page_li = 0;
				return;
			}
			for (var index = 1; index < page_li + 1; index++) {
				app.pages.push(index);
			};
		}
		loadOrders();
	</script>
</body>

</html>