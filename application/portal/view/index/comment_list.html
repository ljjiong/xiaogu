<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=no, width=device-width">
  <meta name="keywords" content="wancllshop">
  <title></title>
  <!-- 公共资源文件引入 -->
  <link rel="stylesheet" href="/public/static/common/css/loading.css" type="text/css">

  <link rel="stylesheet" href="/public/static/wap/aui/css/aui.css" type="text/css">
  <link rel="stylesheet" href="/public/static/wap/css/wap.css" type="text/css">
  <link rel="stylesheet" type="text/css" href="/public/static/wap/aui/css/aui-flex.css" />

  <!-- 图标库 -->
  <link rel="stylesheet" type="text/css" href="/public/static/common/css/ali_icon/iconfont.css" />

  <script src="/public/static/jquery-3.2.1.min.js" type="text/javascript"></script>
  <script src="/public/static/layer-v3.1.1/layer/layer.js" type="text/javascript"></script>
  <script src="/public/static/vue/vue-2.5.15/vue.min.js" type="text/javascript"></script>


  <script src="/public/static/common/script/common.js" type="text/javascript"></script>
  <script src="/public/static/common/script/config.js" type="text/javascript"></script>
  <script src="/public/static/common/script/wapRouter.js" type="text/javascript"></script>

  <script src="/public/static/axios/axios.min.js"></script>
  <script src="/public/static/common/script/httpPromise.js"></script>
  <link rel="icon" id="icon-img" href="" type="image/x-icon"/>


  <!-- <script>
    document.title = getStorage('systemParams').system_title || ''
    document.getElementById("icon-img").href = getStorage('systemParams').web_icon;
  </script> -->
<link rel="stylesheet" href="/public/static/OwlCarousel2-2.2.1/assets/owl.carousel.min.css">
<link rel="stylesheet" href="/public/static/OwlCarousel2-2.2.1/assets/owl.theme.default.min.css">
<script src="/public/static/OwlCarousel2-2.2.1/owl.carousel.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	
	<style type="text/css">
		
		.search-none-content{background-color:#ffffff;margin-top:24px;margin-bottom:60px;border-radius: 4px;padding:24px 22px 35px 22px;}
		.search-none-content .search-none-cont2  .cont2-title{margin-top:0px;border-left:3px solid #108ee9;color:#444444;line-height:1.25;margin-bottom:18px;}
		
		.search-none-content .search-none-cont2 li{width:210px;margin-right:25px;float:left;border:1px solid #efeeee;box-sizing:border-box;}
		.search-none-content .search-none-cont2 li:nth-child(5n){margin-right:0px;}
		.search-none-content .search-none-cont2 li .img-top{border-bottom:1px solid #efeeee;}
		.search-none-content .search-none-cont2 li .cont2-bottom{width:208px;height:107px;box-sizing:border-box;padding:14px 9px 0px 9px;}
		.search-none-content .search-none-cont2 li .cont2-bottom .title{color: rgb(40, 40, 40);line-height: 1.3;}
		.search-none-content .search-none-cont2 li .cont2-bottom .price{float:left;color: rgb(221, 9, 9);font-size:21px;margin-bottom:0px;margin-top:0px;}
		.search-none-content .search-none-cont2 li .cont2-bottom .price span{text-decoration: line-through;color: rgb(85, 85, 85);line-height:27px;display:inline-block;vertical-align:top;}
		.search-none-content .search-none-cont2 li .cont2-bottom .mun{float:right;color: rgb(85, 85, 85);line-height:27px;}

		.assess-list-cont .list-cont{border:1px solid #d2d2d2;padding:28px 23px 20px 23px;margin-bottom:27px;}
		.assess-list-cont .list-cont .list-bottom{display:none;}
		.assess-list-cont .goods-img{width:120px;height:120px;border:1px solid #d2d2d2;}
		.assess-list-cont .goods-img img{display:block;max-width:100%;max-height:100%;margin:0 auto;}
		.assess-list-cont .goods-text{width:222px;}
		.assess-list-cont .goods-text .title{line-height:1.8;}
		.assess-list-cont .goods-text .text{color: rgb(143, 143, 143);}
		.assess-list-cont .goods-score{width:305px;padding-top:40px;}
		.assess-list-cont .goods-score .cont{margin:0 auto;width:135px;position:relative;overflow:hidden;height:19px;line-height:19px;display:block;vertical-align:top;}
		.assess-list-cont .goods-score .cont i{font-size:20px;display:inline-block;}
		.assess-list-cont .goods-score .cont .star-css-top{height:19px;overflow:hidden;position:absolute;top:0px;left:0px;z-index:1;}
		.assess-list-cont .goods-score .cont .star-css-top i{color:#ffc640;}
		.assess-list-cont .goods-score .cont .star-css-bot{width:135px;overflow:hidden;height:19px;}
		.assess-list-cont .goods-score .cont .star-css-bot i{color:#cccccc;}
		.assess-list-cont .goods-price{width:158px;text-align:center;padding-top:9px;}
		.assess-list-cont .goods-price .title{color:#000000;}
		.assess-list-cont .goods-price .text{color:#e01313;margin-bottom:10px;}
		.assess-list-cont .goods-price .button{width:91px;height:27px;border-radius:27px;background-color:#108ee9;color:#ffffff;}

		.list-bottom{border-top:1px solid #eeeeee;margin-top:19px;padding-top:30px;}
		.list-bottom .title{padding-left:15px;margin-bottom:30px;}
		.list-bottom .list-ul-img li{height:120px;border:1px solid #d2d2d2;margin-right:20px;padding:10px;}
		.list-bottom .list-ul-img li img{display:block;max-width:100%;height:100%;margin:0 auto;}

		.assess-list-cont .list-cont.assess .goods-price{padding-top:20px;}
		.assess-list-cont .list-cont.assess .goods-price .text{color:#4caaef!important;}
		.assess-list-cont .list-cont.assess .list-bottom{display:block;}
		.comment_score_20{width: 20%}
		.comment_score_40{width: 40%}
		.comment_score_60{width: 60%}
		.comment_score_80{width: 80%}
		.comment_score_100{width: 100%}
		.order_null_text{position: absolute;left: 47%;top: 53px;}




	</style>

</head>
<body>
	{include file="/index/header" /}
	<div id="app">
	<div class="w1200 margin-tt-15 over  black-text">
			<div class="left">
                    <!-- 个人信息卡 -->
                    <div class="card-title-wrap">
                        <img  src="/public/static/portal/img/title-back.png" class="responsive-img">
                        <div class="margin-10 over card-text-wrap">
                            <div class="ridius-img left margin-15">
                                <img :src="user.avatar" alt="">
                            </div>
                            <div class="left margin-top-15">
                                <div class="font-size-18 margin-top-15 white-text"  v-text="user.nick_name || user.mobile"></div>
                                <div class="blue lighten-1 margin-top-5" style="border-radius: 4px;padding: 2px 4px;">
                                    <img src="/public/static/portal/img/lr.png" alt="">
                                    <span class="font-size-12 white-text" v-text="level"></span>
                                </div>
                            </div>
                        </div>
                        <div class="rate-line font-size-12 blue-text text-lighten-5">
                            <div class="rataing-nember  margin-15" v-text=" '成长值  ' + score"></div>
                            <div class="ratas-nember right"></div>	
                        </div>
                    </div>
                    <div class="white grey-text text-darken-3 margin-top-15" style="border-radius: 5px">
                        <div class="card-right-nav-box  margin-10 padding-tt-10" style="border: none">
                            <div class="card-right-nav">
                                <div class="font-size-18 over margin-tt-10">
                                    <i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
                                    <span class="left margin-top-5">交易管理</span>
                                </div>
                                <ul class="card-right-nav-ul">
                                    <li class="margin-tt-13" @click="goto('cart_list')">购物车</li>
                                    <li class="margin-tt-13" @click="goto('order_list')">我的订单</li>
                                    <li class="margin-tt-13" @click="goto('comment_list')">我的评价</li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-right-nav-box  margin-10 padding-tt-10">
                            <div class="card-right-nav">
                                <div class="font-size-18 over margin-tt-10">
                                        <i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
                                    <span class="left margin-top-5">账号管理</span>
                                </div>
                                <ul class="card-right-nav-ul">
                                    <li class="margin-tt-13" @click="goto('setting')">个人信息</li>
                                    <li class="margin-tt-13" @click="goto('account')">账号安全</li>
                                    <li class="margin-tt-13" @click="goto('idcard_auth')" >实名认证</li>
                                    <li class="margin-tt-13" @click="goto('address_list')">地址管理</li>
                                    <li class="margin-tt-13"  @click="goto('collection_list')">我的收藏</li>
                                    <li class="margin-tt-13"  @click="goto('level')">成长值<span class="blue-text text-lighten-1" v-text="'('+score+')'"></span></li>
                                    <li class="margin-tt-13"  @click="goto('bind')">第三方账户</li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-right-nav-box margin-10 padding-tt-10">
                            <div class="card-right-nav">
                                <div class="font-size-18 over margin-tt-10">
                                        <i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
                                    <span class="left margin-top-5">资产管理</span>
                                </div>
                                <ul class="card-right-nav-ul">
                                    <li class="margin-tt-13" @click="goto('wallet')">我的钱包</li>
                                    <li class="margin-tt-13" @click="goto('bankcard_list')">我的银行卡</li>
                                    <li class="margin-tt-13" @click="goto('my_coupon_list')">我的优惠券<span class="blue-text text-lighten-2"></span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div> 	   	
		<div class="right right-content">
			<div class="padding-15 white">
				<div class="margin-15 font-size-18 black-text padding-tt-5" style="border-bottom:2px solid #eeeeee;padding-bottom:15px!important;">我的评价</div>
				<div v-if="comment_orders.length == 0 && no_comment_orders.length == 0" class="over margin-btn-15" style="margin: 200px 0">
						<div class="center relative margin-btn-15">
								<div class="order_null_text">空空如也~</div>
								 <img src="/public/static/portal/img/404.png" alt="" class="responsive-img order_null_img">
								<br>
						<div class="setting-go-btn white-text blue inline-black margin-15 order_null_box pointer" @click="goto('index')">去逛逛</div>
				 </div>
				</div>
				<div class="assess-list-cont margin-15" v-else-if>
					<div class="list-cont assess"  v-for="comment_order in comment_orders">
						<div class="list-top clearfix">
							<div class="left goods-img padding-5">
								<img :src="comment_order.order_goods_info.thum">
							</div>
							<div class="left goods-text padding-10 padding-left-15">
								<p class="title margin-btn-10 font-size-14" v-text="comment_order.order_goods_info.name"></p>
								<p class="text"></p>	
							</div>
							<div class="left goods-score">
								<div class="cont">
									<div class="star-css-top" :class="{'comment_score_20':(comment_order.score == 1),'comment_score_40':(comment_order.score == 2),'comment_score_60':(comment_order.score == 3),'comment_score_80':(comment_order.score == 4),'comment_score_100':(comment_order.score == 5)}">
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
									</div>
									<div class="star-css-bot">
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
									</div>
								</div>
							</div>
							<div class="left goods-price">
								<p class="title font-size-18 font-w margin-btn-5" v-text="comment_order.order_goods_info.sell_price"></p>
								<p class="text font-size-14">已评价</p>
							</div>
						</div>
						<div class="list-bottom">
							<p class="title font-size-14" v-text="comment_order.content" style="word-break: break-all;word-wrap:break-word; overflow: hidden;width: 100%;"></p>
							<ul class="list-ul-img clearfix">
								<li class="left" v-for="img in comment_order.imgs"><img :src="img"></li>
							</ul>
						</div>
					</div>
					<div class="fen-page" style="margin-top:24px;text-align:left;margin-left:23px;margin-bottom:12px;" v-if="comment_page_count > comment_page_size">
                        <span v-for="(page,key) in comment_pages" v-text="page" @click="getPage(page,'comment')"></span>
					</div>
				

					<div class="list-cont" v-for="no_comment_order in no_comment_orders">
						<div class="list-top clearfix" v-for="goods2 in no_comment_order.order_goods_info">
							<div class="left goods-img padding-10">
								<img :src="goods2.thum">
							</div>
							<div class="left goods-text padding-10 padding-left-15">
								<p class="title margin-btn-10 font-size-14" v-text="goods2.name"></p>
								<p class="text">规格：<span v-text="goods2.spec_group_info"></span></p>	
							</div>
							<div class="left goods-score">
								<div class="cont">
									<div class="star-css-top" style="width:60%;">
									</div>
									<div class="star-css-bot">
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
										<i class="iconfont icon-shoucang"></i>
									</div>
								</div>
							</div>
							<div class="left goods-price">
								<p class="title font-size-18 font-w margin-btn-5" v-text="goods2.sell_price"></p>
								<p class="text font-size-14">未评价</p>
								<button class="button" @click="gocom_add(no_comment_order.id,goods2)">去评价</button>
							</div>
						</div>
						<div class="list-bottom">
							
						</div>
					</div>
				</div>
				
				<div class="fen-page" style="margin-top:24px;text-align:left;margin-left:23px;margin-bottom:12px;" v-if="no_comment_page_count > no_comment_page_size">
                        <span v-for="(page,key) in no_comment_pages" v-text="page" @click="getPage(page,'no_comment')"></span>
                </div>
			</div>
			<div class="margin-top-15">
				<img src="/public/static/portal/img/lien-img.png" alt="" class="responsive-img">
			</div>
		</div>
	</div>

	<div class="w1200">
		<div class="search-none-content white"> 
			<div class="search-none-cont2">
				<h4 class="cont2-title font-size-16 padding-left-10">为你推荐</h4>
				<div class="cont2-list">
					<ul>
						<li>
							<a class="img-top" href="">
								<img class="img-class" src="/public/static/portal/images/search-list-img.jpg">
							</a>
							<div class="cont2-bottom">
								<a class="title font-size-14 margin-btn-15" href="">COCCINELLE DESIGN系列 女士长款钱包 意大利</a>	
								<div class="clearfix">
									<h5 class="price">￥198<span class="font-size-10 margin-left-5">￥389</span></h5>
									<p class="mun font-size-12">月销量:2530</p>
								</div>
							</div>
							
						</li>
						<li>
							<a class="img-top" href="">
								<img class="img-class" src="/public/static/portal/images/search-list-img.jpg">
							</a>
							<div class="cont2-bottom">
								<a class="title font-size-14 margin-btn-15" href="">COCCINELLE DESIGN系列 女士长款钱包 意大利</a>	
								<div class="clearfix">
									<h5 class="price">￥198<span class="font-size-10 margin-left-5">￥389</span></h5>
									<p class="mun font-size-12">月销量:2530</p>
								</div>
							</div>
							
						</li>
						<li>
							<a class="img-top" href="">
								<img class="img-class" src="/public/static/portal/images/search-list-img.jpg">
							</a>
							<div class="cont2-bottom">
								<a class="title font-size-14 margin-btn-15" href="">COCCINELLE DESIGN系列 女士长款钱包 意大利</a>	
								<div class="clearfix">
									<h5 class="price">￥198<span class="font-size-10 margin-left-5">￥389</span></h5>
									<p class="mun font-size-12">月销量:2530</p>
								</div>
							</div>
							
						</li>
						<li>
							<a class="img-top" href="">
								<img class="img-class" src="/public/static/portal/images/search-list-img.jpg">
							</a>
							<div class="cont2-bottom">
								<a class="title font-size-14 margin-btn-15" href="">COCCINELLE DESIGN系列 女士长款钱包 意大利</a>	
								<div class="clearfix">
									<h5 class="price">￥198<span class="font-size-10 margin-left-5">￥389</span></h5>
									<p class="mun font-size-12">月销量:2530</p>
								</div>
							</div>
							
						</li>
						<li>
							<a class="img-top" href="">
								<img class="img-class" src="/public/static/portal/images/search-list-img.jpg">
							</a>
							<div class="cont2-bottom">
								<a class="title font-size-14 margin-btn-15" href="">COCCINELLE DESIGN系列 女士长款钱包 意大利</a>	
								<div class="clearfix">
									<h5 class="price">￥198<span class="font-size-10 margin-left-5">￥389</span></h5>
									<p class="mun font-size-12">月销量:2530</p>
								</div>
							</div>
							
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>

</div>

	<style type="text/css">


	</style>
	

	{include file="index/footer" /}
	<script>
		var app = new Vue({
            el: '#app',
            data: {
            	comment_page : 1,
		 		no_comment_page : 1,
                activeFooterIndex: 4,
                title: '个人中心',
                user: user,
                haveNoData: false,
                level: '',
                score: '',
                comment_orders: [],
                no_comment_orders: [],
                comment_pages:[],
                no_comment_pages:[],
                comment_page_count:'',
        		comment_page_size:'',
        		no_comment_page_count:'',
        		no_comment_page_size:'',
            },
            methods: {
				gocom_add:function(orderId,goods){

					setStorage('goods', goods, sessionStorage);
					goto('comment', { orderId: orderId });
				},
                authentication: function () {
                    httpRequest('POST', 'api_query/users/auth',{},function (resp) {
                        var status = resp.data.status;
                        if (status == 0 || status == 2) {
                            goto('idcard_auth', {status: status, id: resp.data.id});
                        } else if (status == 1 || status == 3) {
                            goto('idcard_info');
                        }
                    })
                },
				getPage: function (data,type) {
					app.comment_pages = []
					app.comment_orders = []
					app.no_comment_pages = []
					app.no_comment_orders = []
					if(type=="comment"){
						app.comment_page = data
					}else if(type=="no_comment"){
						app.no_comment_page = data
					}
					loadOrders()

				}
            },
            mounted: function () {
            }
        })
        loadOrders = function(){
            httpRequest('POST', 'api_query/users/asset',{},function (resp) {
                        app.level = resp.data.level;
                        app.score = resp.data.score;
                    })
                    httpRequest('POST', 'api_orders/orders/lists',{status:4,is_comment:0},function (resp) {
                        if (resp.data.length > 0) {
                            app.haveNoData = false;
                            var data_count = 0;
			                app.no_comment_page_size = resp.page.page_limit;
                            resp.data.forEach(function (item) {
	                            if(item.is_comment == 0){
	                            	app.no_comment_orders.push(item);
	                            	data_count++;
	                            }
	                        })
	                        app.no_comment_page_count = data_count;
	                        pagesStatus(data_count,"no_comment_pages");
	                        if (resp.data.length == 10) {
			                    app.no_comment_page++;
			                    document.body.onscroll = scrollEvent;
			                } else {
			                    document.body.onscroll = null;
			                }
                        } else {
                            app.haveNoData = true
                        }
					},{
                        	'page-num': app.no_comment_page,
                			'page-limit': 1 
                        })
					httpRequest('POST','api_goods/goods_comments/lists',{},function (resp){
                    	var data_count = resp.page.data_count;
		                app.comment_page_count = data_count;
		                app.comment_page_size = resp.page.page_limit;
		                pagesStatus(data_count,"comment_pages");
                    	resp.data.forEach(function (item) {
	                    	app.comment_orders.push(item);
	                	})
	                	if (resp.data.length == 10) {
		                    app.comment_page++;
		                    document.body.onscroll = scrollEvent;
		                } else {
		                    document.body.onscroll = null;
                		}
                },{
                        	'page-num': app.comment_page,
                			'page-limit': 1
                        })
        }
        pagesStatus = function (data,type) {
        	if(type == "no_comment_pages"){
				app.no_comment_pages = []
	            var page_li = Math.ceil(data / 1);
	            if (!data) {
	                page_li = 0;
	                return;
	            }
	            for (var index = 1; index < page_li + 1; index++) {
	                app.no_comment_pages.push(index);
	            };
        	}else{
        		app.comment_pages = []
	            var page_li = Math.ceil(data / 1);
	            if (!data) {
	                page_li = 0;
	                return;
	            }
	            for (var index = 1; index < page_li + 1; index++) {
	                app.comment_pages.push(index);
	            };
        	}
            
        }
        loadOrders();
	</script>
</body>

</html>