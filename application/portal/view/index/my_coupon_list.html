<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=no, width=device-width">
  <meta name="keywords" content="wancllshop">
  <title></title>
  <!-- 公共资源文件引入 -->
  <link rel="stylesheet" href="/public/static/common/css/loading.css" type="text/css">

  <link rel="stylesheet" href="/public/static/wap/aui/css/aui.css" type="text/css">
  <link rel="stylesheet" href="/public/static/wap/css/wap.css" type="text/css">
  <link rel="stylesheet" type="text/css" href="/public/static/wap/aui/css/aui-flex.css" />

  <!-- 图标库 -->
  <link rel="stylesheet" type="text/css" href="/public/static/common/css/ali_icon/iconfont.css" />

  <script src="/public/static/jquery-3.2.1.min.js" type="text/javascript"></script>
  <script src="/public/static/layer-v3.1.1/layer/layer.js" type="text/javascript"></script>
  <script src="/public/static/vue/vue-2.5.15/vue.min.js" type="text/javascript"></script>


  <script src="/public/static/common/script/common.js" type="text/javascript"></script>
  <script src="/public/static/common/script/config.js" type="text/javascript"></script>
  <script src="/public/static/common/script/wapRouter.js" type="text/javascript"></script>

  <script src="/public/static/axios/axios.min.js"></script>
  <script src="/public/static/common/script/httpPromise.js"></script>
  <link rel="icon" id="icon-img" href="" type="image/x-icon"/>


  <!-- <script>
    document.title = getStorage('systemParams').system_title || ''
    document.getElementById("icon-img").href = getStorage('systemParams').web_icon;
  </script> -->
<link rel="stylesheet" href="/public/static/OwlCarousel2-2.2.1/assets/owl.carousel.min.css">
<link rel="stylesheet" href="/public/static/OwlCarousel2-2.2.1/assets/owl.theme.default.min.css">
<script src="/public/static/OwlCarousel2-2.2.1/owl.carousel.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	
	<style type="text/css">
		.search-none-content{background-color:#ffffff;margin-top:24px;margin-bottom:60px;border-radius: 4px;padding:24px 22px 34px 22px;}
		.search-none-content .search-none-cont2  .cont2-title{margin-top:0px;border-left:3px solid #108ee9;color:#444444;line-height:1.25;margin-bottom:18px;}
		.search-none-content .search-none-cont2 li{width:210px;margin-right:25px;float:left;border:1px solid #efeeee;box-sizing:border-box;}
		.search-none-content .search-none-cont2 li:nth-child(5n){margin-right:0px;}
		.search-none-content .search-none-cont2 li .img-top{border-bottom:1px solid #efeeee;}
		.search-none-content .search-none-cont2 li .cont2-bottom{width:208px;height:107px;box-sizing:border-box;padding:14px 9px 0px 9px;}
		.search-none-content .search-none-cont2 li .cont2-bottom .title{color: rgb(40, 40, 40);line-height: 1.3;}
		.search-none-content .search-none-cont2 li .cont2-bottom .price{float:left;color: rgb(221, 9, 9);font-size:21px;margin-bottom:0px;margin-top:0px;}
		.search-none-content .search-none-cont2 li .cont2-bottom .price span{text-decoration: line-through;color: rgb(85, 85, 85);line-height:27px;display:inline-block;vertical-align:top;}
		.search-none-content .search-none-cont2 li .cont2-bottom .mun{float:right;color: rgb(85, 85, 85);line-height:27px;}

		.my-car-content{padding:18px 22px 20px 22px;background-color:#ffffff;border-radius:5px;}
		.my-car-content .my-car-title{color: rgb(38, 38, 38);padding-bottom:20px;}
		.my-car-content .car-input-code{background-color:#f4f4f4;padding:50px 0;text-align:center;margin-bottom:30px;}
		.my-car-content .car-input-code .car-input-cont{display:inline-block;margin:0 auto;}
		.my-car-content .car-input-code .car-title{display:inline-block;width:136px;text-align:center;font-size:16px;color: rgb(40, 40, 40);line-height:44px;font-weight:normal;}
		.my-car-content .car-input-code .input-text{display:inline-block;width:307px;height:44px;background-color:#ffffff;border-radius:4px;margin-right:10px!important;}
		.my-car-content .car-input-code .button{width:100px;height:44px;border-radius:4px;color:#ffffff;background-color:#108ee9;}
		.my-car-content .car-input-code .button:hover{background-color:#097acb;}

		.my-car-content .my-car-nav{border-bottom:1px solid #eeeeee;border-left:1px solid #eeeeee;height:44px;}
		.my-car-content .my-car-nav li{float:left;width:119px;height:45px;text-align:center;font-size:15px;border-right:1px solid #eeeeee;border-top:1px solid #eeeeee;line-height:43px;color: rgb(40, 40, 40);cursor:pointer;}
		.my-car-content .my-car-nav li.active1{color:#108ee9;border-top:2px solid #108ee9;background-color:#ffffff;height:44px;}
		.yhj-list-content{padding-top:20px;margin-bottom:38px;}
		.yhj-list-content ul{display:block;}
		.yhj-list-content li{width:420px;height:119px;background:url(/public/static/portal/images/yh-img-bk1.png) center no-repeat;background-size:cover;margin-right:29px;margin-bottom:32px;float:left!important;}
		.yhj-list-content li.gq-list{background:url(/public/static/portal/images/yh-img-bk2.png) center no-repeat;background-size:cover;}
		.yhj-list-content li.gq-list .price{color:#b6b6b6;background-image: -webkit-gradient(linear, 0 0, 0 bottom, from(#adadad), to(#c5c5c5));
     -webkit-background-clip: text;
     -webkit-text-fill-color: transparent;}
     	.yhj-list-content li.gq-list .yh-left .text{color:#b6b6b6;background-image: -webkit-gradient(linear, 0 0, 0 bottom, from(#adadad), to(#c5c5c5));
     -webkit-background-clip: text;
     -webkit-text-fill-color: transparent;}
     	.yhj-list-content li.gq-list .yh-right .button{ background: -moz-linear-gradient(top, #adadad 0%, #c8c9c9 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#adadad), color-stop(100%,#c8c9c9));
    background: -webkit-linear-gradient(top, #adadad 0%,#c8c9c9 100%);
    background: -o-linear-gradient(top, #adadad 0%,#c8c9c9 100%);
    background: -ms-linear-gradient(top, #adadad 0%,#c8c9c9 100%);
    background: linear-gradient(to bottom, #adadad 0%,#c8c9c9 100%);}





		.yhj-list-content li:after{content:"";display:block;clear:both;}
		.yhj-list-content li:nth-child(2n){margin-right:0px;}
		.yhj-list-content li .yh-left{width:108px;height:119px;border-right:1px solid #fde4e3;text-align: center;padding-top:25px;}
		.yhj-list-content li .yh-left .price{font-size:30px;color:#2991e5;line-height:1;margin-bottom:12px;}
		.yhj-list-content li .yh-left .price span{font-size:20px;font-weight:normal;}
		.yhj-list-content li .yh-left .text{color:#2991e5;font-size:18px;}
		.yhj-list-content li .yh-right{padding-top:22px;padding-left:20px;}
		.yhj-list-content li .yh-right .left-cont{width:184px;display:inline-block;}
		.yhj-list-content li .yh-right .yh-title{font-size:16px;margin-bottom:10px;color:#282828;line-height:1.6;width:100%;}
		.yhj-list-content li .yh-right	.time{font-size:13px;color:#979797;vertical-align:middle;}
		.yhj-list-content li .yh-right .button{width:80px;height:32px;border-radius:4px;background-color:#d50202;color:#ffffff;font-size:13px;vertical-align:top;margin-left:18px;margin-top:20px;}
		.yhj-list-content li .yh-right .button:hover{background-color:#fd0000;}	

		.yhj-info-bottom{border-top:1px solid #eeeeee;padding-top:18px;}
		.yhj-info-bottom .title{ font-size: 14px;color: rgb(40, 40, 40);margin-bottom:15px;}
		.yhj-info-bottom .text{ font-size: 12px;color: rgb(150, 150, 150);line-height: 1.5;padding-left:12px;background:url(/public/static/portal/images/dian11.png) no-repeat;background-position:0px 8px;}





	</style>

</head>
<body>
	{include file="/index/header" /}
	<div id="app">
	<div class="w1200 margin-tt-15 over  black-text">
			<div class="left">
                    <!-- 个人信息卡 -->
                    <div class="card-title-wrap">
                        <img  src="/public/static/portal/img/title-back.png" class="responsive-img">
                        <div class="margin-10 over card-text-wrap">
                            <div class="ridius-img left margin-15">
                                <img :src="user.avatar" alt="">
                            </div>
                            <div class="left margin-top-15">
                                <div class="font-size-18 margin-top-15 white-text" v-text="user.mobile"></div>
                                <div class="blue lighten-1 margin-top-5" style="border-radius: 4px;padding: 2px 4px;">
                                    <img src="/public/static/portal/img/lr.png" alt="">
                                    <span class="font-size-12 white-text" v-text="level"></span>
                                </div>
                            </div>
                        </div>
                        <div class="rate-line font-size-12 blue-text text-lighten-5">
                            <div class="rataing-nember  margin-15" v-text=" '成长值  ' + score"></div>
                            <div class="ratas-nember right"></div>	
                        </div>
                    </div>
                    <div class="white grey-text text-darken-3 margin-top-15" style="border-radius: 5px">
                        <div class="card-right-nav-box  margin-10 padding-tt-10" style="border: none">
                            <div class="card-right-nav">
                                <div class="font-size-18 over margin-tt-10">
                                    <i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
                                    <span class="left margin-top-5">交易管理</span>
                                </div>
                                <ul class="card-right-nav-ul">
                                    <li class="margin-tt-13" @click="goto('cart_list')">购物车</li>
                                    <li class="margin-tt-13" @click="goto('order_list')">我的订单</li>
                                    <li class="margin-tt-13" @click="goto('comment_list')">我的评价</li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-right-nav-box  margin-10 padding-tt-10">
                            <div class="card-right-nav">
                                <div class="font-size-18 over margin-tt-10">
                                        <i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
                                    <span class="left margin-top-5">账号管理</span>
                                </div>
                                <ul class="card-right-nav-ul">
                                    <li class="margin-tt-13" @click="goto('setting')">个人信息</li>
                                    <li class="margin-tt-13" @click="goto('account')">账号安全</li>
                                    <li class="margin-tt-13" @click="goto('idcard_auth')" >实名认证</li>
                                    <li class="margin-tt-13" @click="goto('address_list')">地址管理</li>
                                    <li class="margin-tt-13"  @click="goto('collection_list')">我的收藏</li>
                                    <li class="margin-tt-13"  @click="goto('level')">成长值<span class="blue-text text-lighten-1" v-text="'('+score+')'"></span></li>
                                    <li class="margin-tt-13"  @click="goto('bind')">第三方账户</li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-right-nav-box margin-10 padding-tt-10">
                            <div class="card-right-nav">
                                <div class="font-size-18 over margin-tt-10">
                                        <i class="iconfont icon-icon_order left text-lighten-1" style="font-size:24px; margin-right: 5px;height: 30px;line-height: 30px;"></i>
                                    <span class="left margin-top-5">资产管理</span>
                                </div>
                                <ul class="card-right-nav-ul">
                                    <li class="margin-tt-13" @click="goto('wallet')">我的钱包</li>
                                    <li class="margin-tt-13" @click="goto('bankcard_list')">我的银行卡</li>
                                    <li class="margin-tt-13" @click="goto('my_coupon_list')">我的优惠券<span class="blue-text text-lighten-2"></span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>  
		<div class="right right-content">
			<div class="my-car-content">
				<h4 class="my-car-title font-size-16 border-btn">我的优惠劵</h4>
				<div class="car-input-code">
					<div class="car-input-cont">
						<span class="car-title">输入兑换码：</span>
						<input type="text" class="input-text" name="" v-model="coupon_no">
						<button class="button transition" @click="submit()">兑换</button>
					</div>
				</div>
				<div class="my-car-nav">
					<ul class="clearfix">
						<li class="active1" id="1">未使用(<span v-text="noUseCoupons.length"></span>)</li>
						<li class="" id="2">已使用(<span v-text="useCoupons.length"></span>)</li>
						<li class="" id="3">已过期(<span v-text="overTimeUseCoupons.length"></span>)</li>
					</ul>
				</div>
				<div class="yhj-list-content">
					<ul class="clearfix" id="cont_1">
						<li class="left" v-for="noUseCoupon in noUseCoupons">
							<div class="left yh-left">
								<p class="price font-size-14"><span>￥</span><span v-text="noUseCoupon.reach_money"></span></p>
								<p class="text" v-if="noUseCoupon.coupon_type == 'discount'">打折券</p>
								<p class="text" v-if="noUseCoupon.coupon_type == 'full'">满减券</p>
							</div>
							<div class="left yh-right">
								<div class="left-cont">
									<p class="yh-title" v-if="noUseCoupon.coupon_type == 'discount'">{{'满' + noUseCoupon.reach_money + '元打' + noUseCoupon.change_value + '折' }}</p>
									<p class="yh-title" v-if="noUseCoupon.coupon_type == 'full'">{{'满' + noUseCoupon.reach_money + '元减' + noUseCoupon.change_value + '元' }}</p>
									<p class="time" v-text="noUseCoupon.create_time+'-'+noUseCoupon.expiry_time"></p>
								</div>
								<button class="button transition" @click="goto('index')">立即使用</button>
							</div>
						</li>
					</ul>
					<ul class="clearfix" id="cont_2" style="display:none;" >
						<li class="left gq-list" v-for="useCoupon in useCoupons">
							<div class="left yh-left">
								<p class="price font-size-14"><span>￥</span><span v-text="useCoupon.reach_money"></span></p>
								<p class="text" v-if="useCoupon.coupon_type == 'discount'">打折券</p>
								<p class="text" v-if="useCoupon.coupon_type == 'full'">满减券</p>
							</div>
							<div class="left yh-right">
								<div class="left-cont">
									<p class="yh-title font-size-14" v-if="useCoupon.coupon_type == 'discount'">{{'满' + useCoupon.reach_money + '元打' + useCoupon.change_value + '折' }}</p>
									<p class="yh-title font-size-14" v-if="useCoupon.coupon_type == 'full'">{{'满' + useCoupon.reach_money + '元减' + useCoupon.change_value + '元' }}</p>
									<p class="time" v-text="useCoupon.create_time+'-'+useCoupon.expiry_time"></p>
								</div>
								<button class="button transition">立即使用</button>
							</div>
						</li>
					</ul>
					<ul class="clearfix" id="cont_3" style="display:none;" >
						<li class="left gq-list" v-for="overTimeUseCoupon in overTimeUseCoupons">
							<div class="left yh-left">
								<p class="price"><span>￥</span><span v-text="overTimeUseCoupon.reach_money"></span></p>
								<p class="text" v-if="overTimeUseCoupon.coupon_type == 'discount'">打折券</p>
								<p class="text" v-if="overTimeUseCoupon.coupon_type == 'full'">满减券</p>
							</div>
							<div class="left yh-right">
								<div class="left-cont">
									<p class="yh-title" v-if="overTimeUseCoupon.coupon_type == 'discount'">{{'满' + overTimeUseCoupon.reach_money + '元打' + overTimeUseCoupon.change_value + '折' }}</p>
									<p class="yh-title" v-if="overTimeUseCoupon.coupon_type == 'full'">{{'满' + overTimeUseCoupon.reach_money + '元减' + overTimeUseCoupon.change_value + '元' }}</p>
									<p class="time" v-text="overTimeUseCoupon.create_time+'-'+overTimeUseCoupon.expiry_time"></p>
								</div>
								<button class="button transition">立即使用</button>
							</div>
						</li>
					</ul>
				</div>
				<div class="yhj-info-bottom">
					<p class="title">优惠券说明：</p>
					<p class="text">优惠券不能兑换现金，优惠金额不能开具发票</p>
					<p class="text">优惠券应在券面载明的有效期内使用，过期作废如使用满减类优惠券的订单发生售后退货，优惠券不予退还；如使用直接抵扣类现金券的订单发生售后退货，现金券按照退货商品的金额比例退还。此外，如有其它明确不予退还优惠券的情形时则不予退还</p>
					<p class="text">优惠券券面对同一用户领取优惠券有规定时，如您违反该规定，网易考拉海购有权将您已使用优惠券的订单关闭并按交易失败处理，您已实际支付的款项将进行退款，优惠券不予退还。同一用户是指：根据用户登录或使用的考拉账号，网易考拉海购根据其关联信息判断实际为同一用户的。关联信息包括但不限于：同一手机号或同一支付账号或同一身份证号码或同一设备号</p>
					<p class="text">优惠券的具体使用除应满足每张优惠券券面载明的使用规则外，还应满足优惠券全部说明规则</p>
				</div>
			</div>
			<div class="margin-top-15">
					<img src="/public/static/portal/img/lien-img.png" alt="" class="responsive-img">
			</div>
		</div>
	</div>
	<div class="w1200">
		<div class="search-none-content"> 
			<div class="search-none-cont2">
					<h4 class="cont2-title font-size-16 padding-left-10">为你推荐</h4>
					<div class="cont2-list">
						<ul>
							<li v-for="guessGood in guessGoods" @click="goto('goods_detail',{goodsId:guessGood.id})">
								<a class="img-top">
									<img class="img-class" :src="guessGood.thum">
								</a>
								<div class="cont2-bottom">
									<a class="title font-size-14 margin-btn-15" v-text="guessGood.name"></a>	
									<div class="clearfix">
										<h5 class="price" v-text="'￥' + guessGood.sell_price"><span class="font-size-10 margin-left-5" v-text="'￥' + guessGood.sell_price"></span></h5>
										<p class="mun font-size-12" v-text="'月销量：'+guessGood.sell_num"></p>
									</div>
								</div>
								
							</li>
						</ul>
					</div>
				</div>
		</div>
	</div>
</div>
	{include file="index/footer" /}
	<script type="text/javascript">
		var myDate = new Date()
        let Y = myDate.getFullYear(),
		      M = myDate.getMonth() + 1,
		      D = myDate.getDate() + 1,
		      H = myDate.getHours(),
		      Min = myDate.getMinutes(),
		      S = myDate.getSeconds();
		      if(M < 10){
			    M = '0' + M ;
			  }
			  if(D < 10){
			    D = '0' + D ;
			  }
			  if(H < 10){
			    H = '0' + H ;
			  }
			  if(Min < 10){
			    Min = '0' + Min ;
			  }
			  if(S < 10){
			    S = '0' + S ;
			  }
		var time = Y + '-' + M + '-' + D + ' ' + H + ':' + Min + ':' + S;
		var app = new Vue({
            el: '#app',
            data: {
                activeFooterIndex: 4,
                title: '我的银行卡',
                user: user,
                haveNoData: false,
                level: '',
                score: '',
                coupon_no:'',
                noUseCoupons: [],
                useCoupons: [],
                overTimeUseCoupons: [],
                guessGoods:[],
            },
            methods: {
                authentication: function () {
                    httpRequest('POST', 'api_query/users/auth',{},function (resp) {
                        var status = resp.data.status;
                        if (status == 0 || status == 2) {
                            goto('idcard_auth', {status: status, id: resp.data.id});
                        } else if (status == 1 || status == 3) {
                            goto('idcard_info');
                        }
                    })
                },
                submit:function(){
					if (!this.coupon_no) {
                        layer.msg('请输入兑换码');
                          return;
                         }
                	httpRequest('POST', 'api_users/user_coupons/receive',{
						coupon_no:this.coupon_no
						},function (resp) {
                        layer.msg(resp.msg)
						setTimeout(function () {
                          location.reload();
                            }, 500)
                    })
                }
            },
            mounted: function () {
                httpRequest('POST', 'api_query/users/asset',{},function (resp) {
                    app.level = resp.data.level;
                    app.score = resp.data.score;
                    
				})
				
				httpRequest('POST', 'api_users/user_coupons/lists',{},function (resp) {
                    if (resp.data.length > 0) {
                        app.haveNoData = false;
                        console.log(resp);
                        resp.data.forEach(function (item) {
							item.create_time = item.create_time.slice(0,10)
							item.expiry_time = item.expiry_time.slice(0,10)
                            if(item.status == 1){
                            	app.noUseCoupons.push(item);
                            }else if(item.status == 2){
                            	if(time >= item.expiry_time){
                            		app.overTimeUseCoupons.push(item);
                            	}else{
									app.useCoupons.push(item);
                            	}
                            }
                        })
                    } else {
                        app.haveNoData = true;
                    }
                //猜你喜欢
			    
				})

				httpRequest('POST','api_goods/goods/lists',{is_top:1},function(resp){
		            app.guessGoods = resp.data;
		        },{'page-num':1,'page-limit':4})
            }
        })
		$(function(){
   			$(".my-car-content .my-car-nav li").click(function(){
		        //改变自身属性
		        $(this).removeClass().addClass("active1");
		        //改变除自身之外的属性
		        $(this).siblings().removeClass().addClass("");
		        //改变自身样式 
		        $("#cont_"+$(this).attr("id")).css("display","block");
		        //改变除自身之外的样式
		        $("#cont_"+$(this).attr("id")).siblings().css("display","none");	        
	    	});
   		});
	</script>
</body>

</html>