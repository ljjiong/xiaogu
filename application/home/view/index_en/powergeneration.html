<!-- 新建html模板页 -->

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=no, width=device-width">
    <meta name="keywords" content="wancllshop">
    <title></title>
    <!-- 公共资源文件引入 -->
    <link rel="stylesheet" href="__static__/common/css/loading.css" type="text/css">

    <link rel="stylesheet" href="__static__/wap/aui/css/aui.css" type="text/css">
    <link rel="stylesheet" href="__static__/wap/css/wap.css" type="text/css">
    <link rel="stylesheet" href="__static__/layui/css/layui.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="__static__/wap/aui/css/aui-flex.css" />

    <!-- 图标库 -->
    <link rel="stylesheet" type="text/css" href="__static__/common/css/ali_icon/iconfont.css" />

    <script src="__static__/jquery-3.2.1.min.js" type="text/javascript"></script>
    <script src="__static__/layer-v3.1.1/layer/layer.js" type="text/javascript"></script>
    <script src="__static__/vue/vue-2.5.15/vue.min.js" type="text/javascript"></script>


    <script src="__static__/common/script/common.js" type="text/javascript"></script>
    <script src="__static__/common/script/config.js" type="text/javascript"></script>
    <script src="__static__/common/script/wapRouter.js" type="text/javascript"></script>

    <script src="__static__/axios/axios.min.js"></script>
    <script src="__static__/common/script/httpPromise.js"></script>
    <link rel="icon" id="icon-img" href="" type="image/x-icon" />


    <!-- <script>
    document.title = getStorage('systemParams').system_title || ''
    document.getElementById("icon-img").href = getStorage('systemParams').web_icon;
  </script> -->
    <link rel="stylesheet" href="__static__/OwlCarousel2-2.2.1/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="__static__/OwlCarousel2-2.2.1/assets/owl.theme.default.min.css">
    <script src="__static__/OwlCarousel2-2.2.1/owl.carousel.min.js"></script>
    <script src="__static__/wap/script/index.js"></script>
    <link href="__static__/wap/css/mobiscroll.css" rel="stylesheet" />
    <link href="__static__/wap/css/mobiscroll_date.css" rel="stylesheet" />
    <style type="text/css">
        body {
            background-color: #fff;
        }

        .wages-top-year {
            display: flex;
            align-items: center
        }

        .wages-top-year .right-select {
            box-shadow: 0px 5px 18px 2px rgba(170, 170, 170, 0.3);
            background-color: #fff;
            border-radius: 10px;
            overflow: hidden;
            height: 44px;
            position: relative;
        }

        .wages-top-year .right-select select {
            height: 100%;
            width: 5rem;
        }

        .select-mouth {
            background-color: #e75151;
            border-radius: 10px;
            overflow: hidden;
            padding-left: 30px !important;
            padding-right: 30px !important;
        }

        .select-mouth .item {
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            border-radius: 100%;
            overflow: hidden;
            background-color: #fff;
            box-sizing: border-box;
            color: #e75151;
            font-size: 14px;
            border: 1px solid #fff;
        }

        .owl-nav {
            position: absolute;
            width: 100%;
            top: 50%;
            margin-top: 0 !important;
        }

        .owl-nav .owl-prev {
            position: absolute;
            left: -20px;
            width: 10px;
            height: auto;
            padding: 0 !important;
            margin: 0 !important;
            background: rgba(255, 255, 255, 0) !important;
            margin-top: -9px !important;
        }

        .owl-nav .owl-next {
            position: absolute;
            right: -20px;
            width: 10px;
            height: auto;
            padding: 0 !important;
            margin: 0 !important;
            background: rgba(255, 255, 255, 0) !important;
            margin-top: -9px !important;
        }

        .select-mouth .item.on-active {
            background-color: #e75151;
            color: #fff;
        }

        .content-title {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0px 5px 18px 2px rgba(170, 170, 170, 0.3);
            display: flex;
            align-items: center
        }

        .content-title div {
            flex: 1;
            text-align: center;
            height: 50px;
            line-height: 50px;
        }

        .content-cont {
            border-radius: 10px;
            background-color: rgb(255, 255, 255);
            box-shadow: 0px 5px 18px 2px rgba(170, 170, 170, 0.2);
        }

        .content-cont .cont-item {
            margin-bottom: 1rem;
            position: relative;
            display: flex;
            justify-content: space-between
        }

        .content-cont .cont-item .title {
            width: 25%;
            padding-left: 7%;
            text-align: left;
            box-sizing: border-box;
        }

        .content-cont .cont-item .price {
            flex: 1;
            text-align: center;
        }

        .content-cont .cont-item img {
            position: absolute;
            width: 16px;
            height: 16px;
            left: 5%;
            top: 50%;
            margin-top: -8px
        }

        .content-cont .cont-after:after {
            content: "";
            position: absolute;
            top: 50%;
            margin-top: -6px;
            width: 12px;
            height: 12px;
            border-radius: 12px;
            background-color: #e75151;
            font-size: 15px;
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- 头部 -->
        <header class="aui-bar aui-bar-nav aui-bar-light" id="header" style="background-color: #e75151;">
            <div class="Leave_blank">
                <!-- 返回按钮 -->
                <a class="aui-pull-left aui-btn" onclick="javascript:window.history.back(); return false;">
                    <span style="color: #fff!important;" class="aui-iconfont aui-icon-left"></span>
                </a>
                <div class="aui-title" style="color: #fff;" v-text="title"></div>
            </div>
        </header>
        <!-- 中间页 -->
        <div class="aui-content aui-padded-l-15 aui-padded-r-15" style="padding-bottom: 3.8rem">
            <div class="wages-top-year aui-padded-t-15 aui-padded-b-15">
                <div class="left-title aui-font-size-16 aui-padded-r-15">请选择时间:</div>
                <div class="right-select aui-padded-l-15 aui-padded-r-15">
                    <input id="date_select" value="" class="sel_year" rel="2019" placeholder="请选择时间"
                        style="height: 100%;" onclick="selectDate()" readonly onchange="changeDate()" />
                </div>
            </div>
            <!-- <div class="content-title aui-padded-r-15 aui-padded-l-15 aui-margin-t-15 aui-margin-b-15"
                style="margin-top: 1.2rem!important">
                <div class="aui-font-size-6">电站名</div>
                <div class="aui-font-size-6">厂名</div>
                <div class="aui-font-size-6">机组</div>
                <div class="aui-font-size-6">区名</div>
                <div class="aui-font-size-6">状态</div>
                <div class="aui-font-size-6">功率</div>
            </div> -->
            <div class="content-cont">
                <div v-if="dataList != ''">
                    <table class="layui-table">
                        <colgroup>
                            <col width="50">
                            <col width="200">
                            <col width="200">
                            <col width="200">
                            <col width="200">
                            <col width="200">
                        </colgroup>
                        <thead>
                            <tr>
                                <th>电站名</th>
                                <th>厂名</th>
                                <th>机组</th>
                                <th>状态</th>
                                <th>当前功率</th>
                                <th>有功电量</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="(obj,key) in dataList">
                                <td>{{obj.name==''?'--':obj.name}}</td>
                                <td>{{obj.plant_name==''?'--':obj.plant_name}}</td>
                                <td>{{obj.unit==''?'--':obj.unit}}</td>
                                <td>{{obj.running_status==''?'--':obj.running_status}}</td>
                                <td>{{obj.annual_program==''?'--':obj.annual_program}}</td>
                                <td>{{obj.annual_program==''?'--':obj.annual_program}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- <div v-for="(obj,key) in dataList">
                        <div class="cont-item cont-after">
                            <div class="title">{{obj.name==''?'--':obj.name}}</div>
                            <div class="title">{{obj.plant_name==''?'--':obj.plant_name}}</div>
                            <div class="title">{{obj.unit==''?'--':obj.unit}}</div>
                            <!-- <div class="title">{{obj.district==''?'--':obj.district}}</div> -->
                    <!-- <div class="title">{{obj.running_status==''?'--':obj.running_status}}</div>
                            <div class="title">{{obj.annual_program==''?'--':obj.annual_program}}</div> -->
                    <!-- <div class="price">{{obj==null?'--':obj}}&nbsp;元</div> -->
                    <!-- </div> -->
                    <!-- </div> -->
                </div>
                <div v-if="dataList == ''" style="padding: 1rem 0.75rem;">
                    <div class="cont-item">
                        <div class="price">暂无</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="__static__/wap/script/birthday.js"></script>
    <script src="__static__/wap/script/mobiscroll_date.js" charset="gb2312"></script>
    <script src="__static__/wap/script/mobiscroll.js"></script>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                title: '电站运行状态',
                activeFooterIndex: 2,
                dataList: '',
                data_year: doHandleDate('year'),
                data_month: ''
            },
            methods: {},
            computed: {

            },
            filters: {

            },
            mounted: function () {
                getDatas({
                    dateline: doHandleDate()
                });
            }
        })
        // 年份选择监听
        $("#year_select").change((e) => {
            app.data_year = $("#year_select").children('option:selected').val();
            getDatas({
                uid: user.id,
                year: app.data_year,
                month: app.data_month,
            });
        })
        // 获取数据
        function getDatas(postData) {
            layer.closeAll();
            httpRequest('POST', 'api_operation/operation/lists', postData).then(function (resp) {
                console.log(resp.data == '');
                if (resp.data != '') {
                    app.dataList = resp.data;
                } else {
                    app.dataList = '';
                }
            }).catch(function (resp) {
                if (resp.data != '') {
                    app.dataList = resp.data;
                } else {
                    app.dataList = '';
                }
            });
        }

        // 获取当前年和月
        function doHandleDate() {
            var date = new Date();
            //年
            var year = date.getFullYear();
            //月
            var month = date.getMonth() + 1;
            if (month < 10) {
                month = '0' + month;
            }
            //日
            var day = date.getDate();
            if (day < 10) {
                day = '0' + day;
            }
            var rq = year + "-" + month + "-" + day;
            return rq;
        };

        function changeDate() {
            var date = $("#date_select").val();
            console.log(date);
            getDatas({
                dateline: date
            });
        }
        // 初始化时间选择器
        $(function () {
            $("#view_dpartment").val(user.department)
            var currYear = (new Date()).getFullYear();
            var opt = {};
            opt.date = {
                preset: 'date'
            };
            opt.datetime = {
                preset: 'datetime'
            };
            opt.time = {
                preset: 'time'
            };
            opt.default = {
                theme: 'android-ics light', //皮肤样式
                display: 'modal', //显示方式 
                mode: 'scroller', //日期选择模式
                dateFormat: 'yyyy-mm-dd',
                lang: 'zh',
                showNow: true,
                nowText: "今天",
                startYear: currYear - 50, //开始年份
                endYear: currYear + 10 //结束年份
            };
            $("#date_select").mobiscroll($.extend(opt['date'], opt['default']));
        });
    </script>
</body>

</html>