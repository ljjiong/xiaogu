<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=no, width=device-width">
  <meta name="keywords" content="wancllshop">
  <title></title>
  <!-- 公共资源文件引入 -->
  <link rel="stylesheet" href="__static__/common/css/loading.css" type="text/css">

  <link rel="stylesheet" href="__static__/wap/aui/css/aui.css" type="text/css">
  <link rel="stylesheet" href="__static__/wap/css/wap.css" type="text/css">
  <link rel="stylesheet" type="text/css" href="__static__/wap/aui/css/aui-flex.css" />

  <!-- 图标库 -->
  <link rel="stylesheet" type="text/css" href="__static__/common/css/ali_icon/iconfont.css" />

  <script src="__static__/jquery-3.2.1.min.js" type="text/javascript"></script>
  <script src="__static__/layer-v3.1.1/layer/layer.js" type="text/javascript"></script>
  <script src="__static__/vue/vue-2.5.15/vue.min.js" type="text/javascript"></script>


  <script src="__static__/common/script/common.js" type="text/javascript"></script>
  <script src="__static__/common/script/config.js" type="text/javascript"></script>
  <script src="__static__/common/script/wapRouter.js" type="text/javascript"></script>

  <script src="__static__/axios/axios.min.js"></script>
  <script src="__static__/common/script/httpPromise.js"></script>
  <link rel="icon" id="icon-img" href="" type="image/x-icon" />


  <!-- <script>
    document.title = getStorage('systemParams').system_title || ''
    document.getElementById("icon-img").href = getStorage('systemParams').web_icon;
  </script> -->
  <style>
    body {
      background: url(__static__/wap/img/center-bk2.jpg) top center no-repeat;
      background-size: 100% auto;
      background-color: #fff;
    }

    .top-center-cont {
      padding: 1.8rem 1.2rem 2.2rem;
      margin-top: 5.5rem;
      background-color: #fff;
      overflow: hidden;
      box-shadow: 0px 5px 18px 2px rgba(170, 170, 170, 0.2);
      border-radius: 10px;
      display: flex;
      align-items: center;
    }

    .top-center-cont .left-cont {
      width: 4.0rem;
      height: 4.0rem;
      border-radius: 100%;
      overflow: hidden;
    }

    .top-center-cont .right-cont {
      padding-left: 1rem;
      flex: 1;
      box-sizing: border-box;
    }

    .top-center-cont .right-cont .top-text {
      position: relative;
      padding-left: 1.4rem;
      line-height: 22px
    }

    .top-center-cont .right-cont .top-text img {
      position: absolute;
      left: 0;
      top: 3px;
      height: 16px;
      width: 16px;
    }

    .center-content .center-item {
      box-shadow: 0px 5px 18px 2px rgba(170, 170, 170, 0.2);
      background-color: #fff;
      border-radius: 10px;
      overflow: hidden;
      padding-left: 2.8rem;
      height: 54px;
      line-height: 54px;
      position: relative;
    }

    .center-content .center-item img {
      position: absolute;
      left: 1rem;
      top: 17px;
      height: 22px;
      width: 22px;
    }
  </style>
</head>

<body>
  <div id="app">
    <div class="top-center-cont aui-margin-l-15 aui-margin-r-15 aui-margin-b-15">
      <div class="left-cont">
        <!-- <img style="height: 100%;width: 100%;" src="user.avatar"> -->
        <img :src="user.avatar" class="aui-list-img-sm" id="avatar">
        <input @change="fileChange($event)" type="file" id="upload_file" style="display: none">
        <!--__static__/wap/img/touxi.png-->
      </div>
      <div class="right-cont">
        <div class="aui-margin-b-15 top-text">
          <img src="__static__/wap/img/center-icon1.png">
          <span class="aui-font-size-14">{{user.nick_name}}</span>
        </div>
        <!-- <div class="aui-margin-b-15 top-text">
            <img src="__static__/wap/img/center-icon2.png">
            <span class="aui-font-size-14">湖南蜗壳科技有限公司</span>
          </div> -->
        <div class="top-text">
          <img src="__static__/wap/img/center-icon3.png">
          <span class="aui-font-size-14">{{user.department}}</span>
        </div>
      </div>
    </div>
    <div class="center-content aui-padded-l-15 aui-padded-r-15" style="margin-bottom: 2.8rem">
      <div class="center-item aui-margin-b-15" onclick="gotowap('basic_data')">
        <img src="__static__/wap/img/center-icon4.png">
        <span class="aui-font-size-14">基础信息</span>
      </div>
      <!-- <div class="center-item aui-margin-b-15">
        <img src="__static__/wap/img/center-icon6.png">
        <span class="aui-font-size-14">账号管理</span>
      </div> -->
      <div class="center-item" onclick="gotowap('setting')">
        <img src="__static__/wap/img/center-icon7.png">
        <span class="aui-font-size-14">设置</span>
      </div>
    </div>
    <footer class="aui-bar aui-bar-tab" id="footer">
      <div class="aui-bar-tab-item" onclick="gotowap('index')" :class="{'icon-footer-active' : (activeFooterIndex == 1 )}">
        <div class="icon-div">
          <img v-if="activeFooterIndex == 1" src="__static__/wap/img/icon12.png">
          <img v-else src="__static__/wap/img/icon11.png">
        </div>
        <div class="aui-bar-tab-label">任务</div>
      </div>
      <div class="aui-bar-tab-item" onclick="gotowap('square')" :class="{'icon-footer-active' : (activeFooterIndex == 4 )}">
        <!-- <div class="aui-badge">99</div> -->
        <div class="icon-div">
          <img v-if="activeFooterIndex == 4" src="__static__/wap/img/shequ_clik.png">
          <img v-else src="__static__/wap/img/shequ.png">
        </div>
        <div class="aui-bar-tab-label">广场</div>
      </div>
      <div class="aui-bar-tab-item" onclick="gotowap('personnel_page')"
        :class="{'icon-footer-active' : (activeFooterIndex == 2 )}">
        <div class="icon-div">
          <img v-if="activeFooterIndex == 2" src="__static__/wap/img/icon22.png">
          <img v-else src="__static__/wap/img/icon21.png">
        </div>
        <div class="aui-bar-tab-label">行政</div>
      </div>
      <div class="aui-bar-tab-item" onclick="gotowap('home')" :class="{'icon-footer-active' : (activeFooterIndex == 3 )}">
        <!-- <div class="aui-badge">99</div> -->
        <div class="icon-div">
          <img v-if="activeFooterIndex == 3" src="__static__/wap/img/icon32.png">
          <img v-else src="__static__/wap/img/icon31.png">
        </div>
        <div class="aui-bar-tab-label">我的</div>
      </div>
    </footer>
  </div>
  <script>
    var app = new Vue({
      el: '#app',
      data: {
        activeFooterIndex: 3,
        title: '个人中心',
        user: user
      },
      methods: {
        getParams: function () {
          var that = this
          httpRequest('POST', 'api_systems/params/getParams', {
            type: 'basic'
          }).then(function (resp) {
            that.systemParams = resp.data
            setStorage('systemParams', resp.data)
          })
        },
      },
      mounted: function () {
        var that = this;
        this.getParams()
        httpRequest('POST', 'api_users/users/read').then(function (resp) {
          resp.data.avatar = resp.data.avatar || '__static__/wap/img/touxi.png';
          setStorage(getClientType() + 'User', resp.data);
          that.user = resp.data;
        })
      }
    })
  </script>
</body>

</html>